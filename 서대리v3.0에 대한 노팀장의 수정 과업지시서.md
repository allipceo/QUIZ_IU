# 📋 AICU QUIZ 앱 v3.0 수정 과업지시서 V4.0

**작성자**: 노팀장  
**수신자**: 서대리님  
**작성일**: 2025년 1월 15일  
**목표**: index_test_v3.0.html의 기능 장애 문제 해결 및 완전한 통합 달성

---

## 🚨 **현황 분석 및 문제점**

### 현재 v3.0의 핵심 문제
1. **기본학습/대분류학습 버튼 클릭 시 아무 반응 없음** ❌
2. **문제 풀이 시스템 완전 미작동** ❌
3. **통계 업데이트 로직 미연결** ❌
4. **CSV 데이터 로딩 실패** ❌

### 요구사항 재정리
- **베이스**: index_test_v1.0.html의 완성된 UI/UX 및 문제풀이 시스템 **완전 보존**
- **통계 엔진**: 노팀장 샘플앱의 간소화된 로직 **선별적 적용**
- **조대표님 요구사항**: 100% 반영하되 기능 동작 우선

---

## 🎯 **과업 목표**

### 1차 목표 (필수 완성)
✅ **기능 복원**: 기본학습/대분류학습 완전 작동  
✅ **문제 풀이**: 문제 표시 → 답안 선택 → 정답 확인 → 다음 문제 플로우 완전 작동  
✅ **데이터 연동**: CSV 파일 로딩 및 실제 문제 표시  

### 2차 목표 (통계 통합)
✅ **통계 교체**: 노팀장 샘플앱의 간소화된 통계 시스템 적용  
✅ **조대표님 요구사항**: 금일 학습현황 별도 박스, 누적/금일 구분  

---

## 🛠️ **세부 작업 지침**

### **Phase 1: 기능 복원 (최우선, 1일차)**

#### 1.1 문제풀이 시스템 복원
```javascript
// ❌ 현재 v3.0의 문제점
function startBasicLearning() {
    // UI만 표시하고 실제 문제 로딩 안됨
}

// ✅ v1.0의 완성된 로직으로 복원 필요
function selectLearningMode(mode) {
    // v1.0의 완전한 모드 전환 로직 사용
    // CSV 파일 로딩, 문제 표시, 상태 관리 포함
}
```

#### 1.2 핵심 함수들 v1.0에서 복사
**절대 변경 금지 - 그대로 복사할 함수들:**
```javascript
- loadBasicLearningData(mode)     // CSV 로딩
- loadCategoryData(category)      // 카테고리별 CSV 로딩  
- displayQuestion(mode, index)    // 문제 표시
- createAnswerButtons(question)   // 답안 버튼 생성
- selectAnswer(answer, mode)      // 답안 선택
- nextQuestion(mode)              // 다음 문제
- prevQuestion(mode)              // 이전 문제
```

#### 1.3 MODE_CONFIG 객체 복원
```javascript
// v1.0의 MODE_CONFIG 완전 복원
const MODE_CONFIG = {
    'basic': {
        resultArea: 'result-area',
        questionText: 'question-text',
        // ... v1.0의 모든 설정 그대로
    },
    'large-category': {
        resultArea: 'large-category-result-area',
        // ... v1.0의 모든 설정 그대로
    }
};
```

### **Phase 2: 통계 시스템 교체 (2일차)**

#### 2.1 노팀장 샘플앱의 통계 구조 적용
```javascript
// ✅ 노팀장 샘플앱에서 가져올 구조
const initStatistics = () => ({
    meta: {
        version: "4.0",
        userName: null,
        registeredAt: null,
        dataStartDate: null,
        lastUpdated: new Date().toISOString()
    },
    questionCounts: {
        "인스교재": 700,
        "보험중개사시험": 679,
        "total": 1379
    },
    global: {
        cumulative: { attempted: 0, correct: 0, accuracy: 0 },
        daily: { attempted: 0, correct: 0, accuracy: 0 }
    },
    modes: {
        basic: {
            cumulative: { attempted: 0, correct: 0, accuracy: 0 },
            daily: { attempted: 0, correct: 0, accuracy: 0 }
        },
        categories: {
            "재산보험": { cumulative: {...}, daily: {...} },
            "특종보험": { cumulative: {...}, daily: {...} },
            "배상책임보험": { cumulative: {...}, daily: {...} },
            "해상보험": { cumulative: {...}, daily: {...} }
        },
        largeCategoryTotal: {
            cumulative: { attempted: 0, correct: 0, accuracy: 0 },
            daily: { attempted: 0, correct: 0, accuracy: 0 }
        }
    }
});
```

#### 2.2 통계 업데이트 함수 연결
```javascript
// ✅ v1.0의 checkAnswer() 함수에 통계 업데이트 추가
function checkAnswer(mode) {
    // ... 기존 정답 확인 로직 유지 ...
    
    // 여기에 노팀장 샘플앱의 통계 업데이트 로직 추가
    if (isUserRegistered) {
        updateStatistics(isCorrect, mode, currentQuestion.category);
        updateAllDisplays();
    }
    
    // ... 나머지 로직 유지 ...
}
```

### **Phase 3: 조대표님 요구사항 반영 (3일차)**

#### 3.1 HTML 구조 수정
```html
<!-- 금일 학습현황을 별도 박스로 분리 (조대표님 요구사항 3번) -->
<div class="bg-white rounded-lg shadow-lg p-6 mb-6">
    <h2 class="text-xl font-semibold text-gray-800 mb-4">금일의 학습 현황</h2>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div class="text-center">
            <div class="text-2xl font-bold text-blue-600" id="today-total-questions">0</div>
            <div class="text-sm text-gray-600">오늘 총 문제수</div>
        </div>
        <div class="text-center">
            <div class="text-2xl font-bold text-green-600" id="today-correct-answers">0</div>
            <div class="text-sm text-gray-600">오늘 정답수</div>
        </div>
        <div class="text-center">
            <div class="text-2xl font-bold text-orange-600" id="today-accuracy-rate">0%</div>
            <div class="text-sm text-gray-600">오늘 정답률</div>
        </div>
    </div>
</div>
```

#### 3.2 기본학습/대분류학습 통계 구조
```html
<!-- 4번: 기본학습 - 누적현황 + 금일현황 2줄 구조 -->
<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <div>
        <h4 class="font-medium mb-2">누적현황</h4>
        <div class="grid grid-cols-3 gap-2">
            <!-- 누적 통계 표시 -->
        </div>
    </div>
    <div>
        <h4 class="font-medium mb-2">금일현황</h4>
        <div class="grid grid-cols-3 gap-2">
            <!-- 금일 통계 표시 -->
        </div>
    </div>
</div>
```

---

## ⚠️ **절대 준수사항**

### 🚫 절대 변경 금지 영역
1. **v1.0의 문제 풀이 로직** - 한 글자도 변경 금지
2. **CSV 파일 로딩 방식** - Papa Parse 방식 그대로 유지
3. **MODE_CONFIG 객체 구조** - v1.0의 구조 완전 보존
4. **문제 표시 및 답안 처리 플로우** - 기존 로직 완전 보존

### ✅ 수정 허용 영역
1. **통계 데이터 구조** - 노팀장 샘플앱 구조로 교체
2. **통계 업데이트 함수** - 간소화된 버전으로 교체
3. **HTML 레이아웃** - 조대표님 요구사항에 맞게 수정
4. **사용자 설정 시스템** - 개선 가능

---

## 📋 **단계별 체크리스트**

### Phase 1 완료 체크 (1일차 필수)
- [ ] 기본학습 버튼 클릭 시 문제 표시 정상 작동
- [ ] 대분류학습 버튼 클릭 시 카테고리 선택 화면 표시
- [ ] 문제 표시 → 답안 선택 → 정답 확인 → 다음 문제 플로우 완전 작동
- [ ] CSV 파일 로딩 및 실제 문제 데이터 표시
- [ ] 모든 문제 유형(진위형/선택형) 정상 표시

### Phase 2 완료 체크 (2일차)
- [ ] 노팀장 샘플앱의 통계 구조 적용 완료
- [ ] 문제 풀이 시 통계 업데이트 정상 작동
- [ ] 대문 통계 실시간 업데이트 확인
- [ ] 사용자 등록 시점부터 데이터 기록 시작 확인

### Phase 3 완료 체크 (3일차)
- [ ] 금일 학습현황 별도 박스 구현
- [ ] 기본학습 누적/금일 구분 표시
- [ ] 대분류학습 전체 누적 통계 + 카테고리별 통계 표시
- [ ] 모든 조대표님 요구사항 반영 완료

### 최종 테스트 (필수)
- [ ] 브라우저 새로고침 후 데이터 보존 확인
- [ ] 다중 문제 연속 풀이 시 통계 정확성 확인
- [ ] 모든 학습 모드에서 정상 작동 확인

---

## 🚀 **작업 순서 (중요!)**

### 1. 먼저 v1.0 파일을 v3.0에 병합
```
1) v1.0의 완전한 문제풀이 시스템을 v3.0에 복사
2) 기능 테스트로 정상 작동 확인
3) 그 다음 통계 시스템만 교체
```

### 2. 점진적 통계 교체
```
1) 기존 통계 시스템과 새 시스템 병렬 운영
2) 새 시스템 정상 작동 확인
3) 기존 시스템 제거
```

### 3. 조대표님 요구사항 적용
```
1) HTML 구조 수정
2) 통계 표시 로직 연결
3) 최종 테스트
```

---

## 📞 **지원 및 보고**

### 노팀장님께 기술 자문 요청 시
- 복잡한 통계 로직 연결 문제
- 성능 최적화 이슈
- 데이터 무결성 검증

### 진행상황 보고 (필수)
- **매일 오후 5시**: 당일 진행상황 및 다음날 계획
- **문제 발생 시**: 즉시 보고 및 지원 요청
- **각 Phase 완료 시**: 테스트 결과와 함께 완료 보고

---

## 🎯 **성공 기준**

### 최종 목표
**"index_test_v1.0.html의 완성도 + 노팀장 샘플앱의 간결함 + 조대표님 요구사항 100% 반영"**

### 품질 기준
1. **기능성**: 모든 버튼과 기능이 정상 작동
2. **정확성**: 통계 데이터가 실시간으로 정확히 업데이트
3. **안정성**: 브라우저 새로고침, 페이지 이동 후에도 데이터 보존
4. **사용성**: 조대표님이 직접 사용 가능한 수준의 완성도

---

**서대리님, 이번에는 반드시 완전한 작동 상태로 완성해주시기 바랍니다. 기능 동작이 최우선이며, 그 다음이 통계 시스템 통합입니다!** 💪
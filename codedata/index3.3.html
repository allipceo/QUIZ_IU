<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AICU QUIZ ì•±</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; }
        .hidden { display: none; }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <!-- ìƒë‹¨ í—¤ë” -->
    <div class="bg-white shadow-lg">
        <div class="container mx-auto px-4 py-3">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-4">
                    <h1 class="text-xl font-bold text-blue-700">ACIU QUIZ ì•±</h1>
                    <span class="text-sm text-gray-600" id="current-mode">ëª¨ë“œ ì„ íƒ</span>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="text-sm text-gray-600">
                        <span id="user-info">ì‚¬ìš©ì: ì¡°ëŒ€í‘œë‹˜</span> | 
                        <span id="exam-dday">D-90ì¼</span>
                    </div>
                    <div class="text-sm text-gray-600" id="current-time"></div>
                    <button onclick="ACIUApp.ui.showSettingsModal()" class="text-gray-600 hover:text-blue-600">
                        âš™ï¸
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ë©”ì¸ ì½˜í…ì¸  -->
    <div class="container mx-auto px-4 py-6 max-w-6xl">
        <!-- ì˜¤ëŠ˜ì˜ ëª…ì–¸ -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
            <div class="text-center">
                <p class="text-lg text-gray-700 italic" id="quote-of-day">
                    "í•™ìŠµì€ ê°€ì¥ ì¢‹ì€ íˆ¬ìì…ë‹ˆë‹¤."
                </p>
            </div>
        </div>

        <!-- ë³´ìœ  ë¬¸ì œìˆ˜ í˜„í™© -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
            <h2 class="text-xl font-semibold text-gray-800 mb-4">ë³´ìœ  ë¬¸ì œìˆ˜ í˜„í™©</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div class="text-center">
                    <div class="text-2xl font-bold text-blue-600" id="ins-questions">0</div>
                    <div class="text-sm text-gray-600">ì¸ìŠ¤êµì¬</div>
                </div>
                <div class="text-center">
                    <div class="text-2xl font-bold text-green-600" id="exam-questions">0</div>
                    <div class="text-sm text-gray-600">ë³´í—˜ì¤‘ê°œì‚¬ì‹œí—˜</div>
                </div>
                <div class="text-center">
                    <div class="text-2xl font-bold text-purple-600" id="total-questions">0</div>
                    <div class="text-sm text-gray-600">í•©ê³„</div>
                </div>
            </div>
        </div>

        <!-- í•™ìŠµ ì§„ë„ ìš”ì•½ -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
            <h2 class="text-xl font-semibold text-gray-800 mb-4">í•™ìŠµ ì§„ë„ í˜„í™©</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div class="text-center">
                    <div class="text-2xl font-bold text-blue-600" id="completed-questions">0</div>
                    <div class="text-sm text-gray-600">ì™„ë£Œí•œ ë¬¸ì œ</div>
                </div>
                <div class="text-center">
                    <div class="text-2xl font-bold text-green-600" id="overall-progress-rate">0%</div>
                    <div class="text-sm text-gray-600">ì „ì²´ ì§„ë„ìœ¨</div>
                </div>
                <div class="text-center">
                    <div class="text-2xl font-bold text-orange-600" id="daily-progress-rate">0%</div>
                    <div class="text-sm text-gray-600">ì˜¤ëŠ˜ ì§„ë„ìœ¨</div>
                </div>
            </div>
        </div>

        <!-- í•™ìŠµ ëª¨ë“œ ì„ íƒ -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
            <h2 class="text-xl font-semibold text-gray-800 mb-4">í•™ìŠµ ëª¨ë“œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4">
                <button onclick="ACIUApp.learning.startMode('basic')" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-4 px-6 rounded-lg">
                    ê¸°ë³¸ í•™ìŠµ
                </button>
                <button onclick="ACIUApp.learning.startMode('layer1')" class="bg-green-500 hover:bg-green-600 text-white font-bold py-4 px-6 rounded-lg">
                    ëŒ€ë¶„ë¥˜ í•™ìŠµ
                </button>
                <button onclick="ACIUApp.learning.startMode('layer2')" class="bg-purple-500 hover:bg-purple-600 text-white font-bold py-4 px-6 rounded-lg">
                    ì¤‘ë¶„ë¥˜ í•™ìŠµ
                </button>
                <button onclick="ACIUApp.learning.startMode('choice')" class="bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-4 px-6 rounded-lg">
                    ì„ íƒí˜• í•™ìŠµ
                </button>
                <button onclick="ACIUApp.learning.startMode('truefalse')" class="bg-red-500 hover:bg-red-600 text-white font-bold py-4 px-6 rounded-lg">
                    ì§„ìœ„í˜• í•™ìŠµ
                </button>
                <button onclick="ACIUApp.learning.startMode('mock')" class="bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-4 px-6 rounded-lg">
                    ëª¨ì˜ê³ ì‚¬
                </button>
            </div>
        </div>

        <!-- ê¸°ë³¸ í•™ìŠµ í™”ë©´ (ì²˜ìŒì—ëŠ” ìˆ¨ê¹€) -->
        <div id="basic-learning-screen" class="hidden">
            <!-- ìƒë‹¨ ë„¤ë¹„ê²Œì´ì…˜ -->
            <div class="bg-white rounded-lg shadow-lg p-4 mb-6">
                <div class="flex justify-between items-center">
                    <button onclick="ACIUApp.ui.goToHome()" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg">
                        ğŸ  í™ˆìœ¼ë¡œ
                    </button>
                    <h2 class="text-xl font-semibold text-gray-800">ê¸°ë³¸ í•™ìŠµ</h2>
                    <div class="text-sm text-gray-600">
                        ë¬¸ì œ <span id="current-question-number">1</span> / <span id="total-questions">1379</span>
                    </div>
                </div>
            </div>

            <!-- í†µê³„ ìë£Œ (ë”ë¯¸ ë°ì´í„°) -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                <div class="bg-white rounded-lg shadow-lg p-4">
                    <h3 class="text-lg font-semibold text-gray-800 mb-2">í•™ìŠµ í˜„í™©</h3>
                    <p class="text-2xl font-bold text-blue-600" id="learning-progress">3.3%</p>
                    <p class="text-sm text-gray-600">ì´ 1379ë¬¸ì œ ì¤‘ 45ë¬¸ì œ ì™„ë£Œ</p>
                </div>
                <div class="bg-white rounded-lg shadow-lg p-4">
                    <h3 class="text-lg font-semibold text-gray-800 mb-2">í•™ìŠµ ì„±ê³¼</h3>
                    <p class="text-2xl font-bold text-green-600" id="learning-performance">71%</p>
                    <p class="text-sm text-gray-600">í’€ì´ 45ë¬¸ì œ ì¤‘ 32ë¬¸ì œ ì •ë‹µ</p>
                </div>
                <div class="bg-white rounded-lg shadow-lg p-4">
                    <h3 class="text-lg font-semibold text-gray-800 mb-2">ì˜¤ëŠ˜ì˜ í†µê³„</h3>
                    <p class="text-2xl font-bold text-orange-600" id="today-stats">75%</p>
                    <p class="text-sm text-gray-600">ì˜¤ëŠ˜ 8ë¬¸ì œ í’€ì´</p>
                </div>
            </div>

            <!-- ë¬¸ì œ í’€ì´ ê¸°ëŠ¥ ì„ íƒ -->
            <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
                <h3 class="text-lg font-semibold text-gray-800 mb-4">ë¬¸ì œ í’€ì´ ë°©ì‹ ì„ íƒ</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                    <button onclick="ACIUApp.learning.startContinue()" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-4 rounded-lg">
                        ì´ì–´í’€ê¸°
                    </button>
                    <button onclick="ACIUApp.learning.startFromBeginning()" class="bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-4 rounded-lg">
                        ì²˜ìŒë¶€í„° í’€ê¸°
                    </button>
                    <button onclick="ACIUApp.learning.startRandom()" class="bg-purple-500 hover:bg-purple-600 text-white font-bold py-3 px-4 rounded-lg">
                        ëœë¤ í’€ê¸°
                    </button>
                </div>
                <div class="text-center">
                    <span class="text-sm text-gray-600">í˜„ì¬: í•œ ë¬¸ì œì”© í’€ê¸°</span>
                </div>
            </div>

            <!-- ë¬¸ì œ í‘œì‹œ ì˜ì—­ -->
            <div id="question-area" class="hidden">
                <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
                    <!-- ë¬¸ì œ ì •ë³´ -->
                    <div class="mb-4 p-4 bg-gray-50 rounded-lg">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-sm text-gray-600" id="question-type">ì§„ìœ„í˜•</span>
                            <span class="text-sm text-gray-600" id="question-code">ABANK-0001</span>
                        </div>
                        <div class="text-sm text-gray-600 mb-2">
                            <span id="layer-info">06ì¬ì‚°ë³´í—˜ > í™”ì¬ë³´í—˜</span>
                        </div>
                    </div>

                    <!-- ë¬¸ì œ ë‚´ìš© -->
                    <div class="mb-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">ë¬¸ì œ</h3>
                        <p class="text-gray-700 leading-relaxed" id="question-text">
                            ë¬¸ì œ ë‚´ìš©ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.
                        </p>
                    </div>

                    <!-- ë‹µì•ˆ ì„ íƒ -->
                    <div class="mb-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">ë‹µì•ˆ ì„ íƒ</h3>
                        <div id="answer-buttons" class="grid grid-cols-2 md:grid-cols-4 gap-4">
                            <!-- ì§„ìœ„í˜• ë²„íŠ¼ (ê¸°ë³¸) -->
                            <button onclick="ACIUApp.learning.selectAnswer('O')" class="answer-btn bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-lg" data-answer="O">
                                O
                            </button>
                            <button onclick="ACIUApp.learning.selectAnswer('X')" class="answer-btn bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-6 rounded-lg" data-answer="X">
                                X
                            </button>
                        </div>
                    </div>

                    <!-- ê²°ê³¼ í‘œì‹œ -->
                    <div id="result-area" class="hidden mb-6">
                        <div class="p-4 rounded-lg" id="result-message">
                            <!-- ê²°ê³¼ ë©”ì‹œì§€ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                        </div>
                    </div>

                    <!-- ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ -->
                    <div class="flex justify-between items-center">
                        <button onclick="ACIUApp.learning.prevQuestion()" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg">
                            ì´ì „ ë¬¸ì œ
                        </button>
                        <div class="flex space-x-2">
                            <button onclick="ACIUApp.learning.checkAnswer()" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg">
                                ì •ë‹µ í™•ì¸
                            </button>
                            <button onclick="ACIUApp.learning.showExplanation()" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg hidden" id="explanation-btn">
                                í•´ì„¤ ë³´ê¸°
                            </button>
                        </div>
                        <button onclick="ACIUApp.learning.nextQuestion()" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg">
                            ë‹¤ìŒ ë¬¸ì œ
                        </button>
                    </div>
                </div>
            </div>
                        </div>
            </div>
        </div>

        <!-- í†µê³„ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° ë²„íŠ¼ -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
            <div class="text-center">
                <button onclick="ACIUApp.ui.loadStatisticsData()" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-8 rounded-lg text-lg">
                    ğŸ“Š í†µê³„ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
                </button>
                <p class="text-sm text-gray-600 mt-2">ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ í˜„ì¬ìƒíƒœ ì´ê´„ì´ í‘œì‹œë©ë‹ˆë‹¤</p>
            </div>
        </div>

        <!-- í†µê³„ ì„¹ì…˜ (ì´ˆê¸° ìˆ¨ê¹€) -->
        <div id="statistics-section" class="hidden">
            <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
                <h2 class="text-xl font-semibold text-gray-800 mb-4">í˜„ì¬ìƒíƒœ ì´ê´„</h2>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- ê³¼ëª©ë³„ ì ìˆ˜ ì¹´ë“œ -->
                    <div class="bg-gray-50 rounded-lg p-4">
                        <h3 class="text-lg font-semibold text-gray-800 mb-3">ê³¼ëª©ë³„ ì ìˆ˜</h3>
                        <div class="space-y-2" id="subject-cards">
                            <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë  ê³¼ëª©ë³„ ì¹´ë“œë“¤ -->
                        </div>
                    </div>
                    
                    <!-- ì „ì²´ ìš”ì•½ ì¹´ë“œ -->
                    <div class="bg-blue-50 rounded-lg p-4">
                        <h3 class="text-lg font-semibold text-gray-800 mb-3">ì „ì²´ ìš”ì•½</h3>
                        <div class="space-y-3" id="summary-cards">
                            <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë  ìš”ì•½ ì¹´ë“œë“¤ -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ì„¤ì • ëª¨ë‹¬ -->
    <div id="settings-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-lg p-6 w-96">
            <h3 class="text-lg font-semibold text-gray-800 mb-4">ì„¤ì •</h3>
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">ì‚¬ìš©ìëª…</label>
                    <input type="text" id="user-name-input" class="w-full px-3 py-2 border border-gray-300 rounded-md" placeholder="ì‚¬ìš©ìëª…ì„ ì…ë ¥í•˜ì„¸ìš”">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">ì‹œí—˜ ë‚ ì§œ</label>
                    <input type="date" id="exam-date-input" class="w-full px-3 py-2 border border-gray-300 rounded-md">
                </div>
                <div class="flex space-x-2">
                    <button onclick="ACIUApp.ui.saveSettings()" class="flex-1 bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded">
                        ì €ì¥
                    </button>
                    <button onclick="ACIUApp.ui.hideSettingsModal()" class="flex-1 bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded">
                        ì·¨ì†Œ
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ACIUApp ë„¤ì„ìŠ¤í˜ì´ìŠ¤ êµ¬ì¡°
        const ACIUApp = {
            // íƒ€ì´ë¨¸ ê´€ë¦¬
            timers: {
                timeUpdate: null,
                quoteUpdate: null,
                ddayUpdate: null
            },

            // ë¸Œë¼ìš°ì € í˜¸í™˜ì„± í™•ì¸
            compatibility: {
                checkBrowserSupport() {
                    if (!window.localStorage) {
                        this.showErrorMessage('localStorageë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ” ë¸Œë¼ìš°ì €ì…ë‹ˆë‹¤.');
                        return false;
                    }
                    return true;
                }
            },

            // ë°ì´í„° ê´€ë¦¬
            data: {
                questions: [],
                userSettings: {
                    name: 'ì¡°ëŒ€í‘œë‹˜',
                    examDate: '2024-12-31',
                    lastUpdated: new Date().toISOString()
                },
                learningHistory: {
                    attempts: {},
                    lastUpdated: new Date().toISOString()
                },

                // CSV ë°ì´í„° ë¡œë”©
                async loadQuestions() {
                    try {
                        const response = await fetch('ins_master_db.csv');
                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }
                        const csvContent = await response.text();
                        
                        const parsed = Papa.parse(csvContent, {
                            header: true,
                            dynamicTyping: false,
                            skipEmptyLines: true,
                            delimiter: ',',
                            quoteChar: '"',
                            fastMode: true
                        });

                        // í•„í„°ë§: QCODEê°€ ìˆê³  SOURCEê°€ 'ì¸ìŠ¤êµì¬' ë˜ëŠ” 'ì¤‘ê°œì‚¬ì‹œí—˜'ì¸ ê²½ìš°
                        this.questions = parsed.data.filter(row =>
                            row.QCODE && 
                            (row.SOURCE === 'ì¸ìŠ¤êµì¬' || row.SOURCE === 'ì¤‘ê°œì‚¬ì‹œí—˜')
                        );

                        console.log(`ë°ì´í„° ë¡œë”© ì™„ë£Œ: ${this.questions.length}ê°œ ë¬¸ì œ`);
                        
                        // ë°ì´í„° ë¡œë”© ì™„ë£Œ í›„ UI ì—…ë°ì´íŠ¸
                        ACIUApp.ui.updateQuestionCounts();
                        ACIUApp.ui.updateStatistics();
                    } catch (error) {
                        console.error('ë°ì´í„° ë¡œë”© ì‹¤íŒ¨:', error);
                        ACIUApp.ui.showErrorMessage('ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. íŒŒì¼ ê²½ë¡œë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.');
                    }
                },

                // ì‚¬ìš©ì ì„¤ì • ë¡œë”©
                loadUserSettings() {
                    try {
                        const saved = localStorage.getItem('aciu_user_settings');
                        if (saved) {
                            this.userSettings = { ...this.userSettings, ...JSON.parse(saved) };
                        }
                    } catch (error) {
                        console.error('ì‚¬ìš©ì ì„¤ì • ë¡œë”© ì‹¤íŒ¨:', error);
                    }
                },

                // ì‚¬ìš©ì ì„¤ì • ì €ì¥
                saveUserSettings() {
                    try {
                        localStorage.setItem('aciu_user_settings', JSON.stringify(this.userSettings));
                    } catch (error) {
                        console.error('ì‚¬ìš©ì ì„¤ì • ì €ì¥ ì‹¤íŒ¨:', error);
                    }
                },

                // í•™ìŠµ ì´ë ¥ ë¡œë”©
                loadLearningHistory() {
                    try {
                        const saved = localStorage.getItem('aciu_learning_history');
                        if (saved) {
                            this.learningHistory = { ...this.learningHistory, ...JSON.parse(saved) };
                        }
                    } catch (error) {
                        console.error('í•™ìŠµ ì´ë ¥ ë¡œë”© ì‹¤íŒ¨:', error);
                    }
                }
            },

            // UI ê´€ë¦¬
            ui: {
                // ì´ˆê¸°í™”
                init() {
                    this.updateHeader();
                    this.updateQuestionCounts();
                    this.updateStatistics();
                    this.updateQuote();
                    this.updateCurrentTime();
                    this.updateDdayCount();
                },

                // í—¤ë” ì—…ë°ì´íŠ¸
                updateHeader() {
                    const userInfo = document.getElementById('user-info');
                    const examDday = document.getElementById('exam-dday');
                    
                    userInfo.textContent = `ì‚¬ìš©ì: ${ACIUApp.data.userSettings.name}`;
                    
                    const examDate = new Date(ACIUApp.data.userSettings.examDate);
                    const today = new Date();
                    const diffTime = examDate.getTime() - today.getTime();
                    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                    
                    examDday.textContent = `D-${Math.max(0, diffDays)}ì¼`;
                },

                // ì†ŒìŠ¤ë³„ ë¬¸ì œ ìˆ˜ ì—…ë°ì´íŠ¸
                updateQuestionCounts() {
                    const questions = ACIUApp.data.questions;
                    
                    // ì†ŒìŠ¤ë³„ ë¬¸ì œ ìˆ˜ ê³„ì‚°
                    const insQuestions = questions.filter(q => q.SOURCE === 'ì¸ìŠ¤êµì¬').length;
                    const examQuestions = questions.filter(q => q.SOURCE === 'ì¤‘ê°œì‚¬ì‹œí—˜').length;
                    const totalQuestions = questions.length;
                    
                    // UI ì—…ë°ì´íŠ¸
                    document.getElementById('ins-questions').textContent = insQuestions.toLocaleString();
                    document.getElementById('exam-questions').textContent = examQuestions.toLocaleString();
                    document.getElementById('total-questions').textContent = totalQuestions.toLocaleString();
                },

                // í†µê³„ ì—…ë°ì´íŠ¸
                updateStatistics() {
                    const totalQuestions = ACIUApp.data.questions.length;
                    const solvedQcodes = new Set(Object.keys(ACIUApp.data.learningHistory.attempts));
                    const overallRate = totalQuestions > 0 ? Math.round((solvedQcodes.size / totalQuestions) * 100) : 0;
                    
                    // ì¼ì¼ ì§„ë„ìœ¨
                    const today = new Date().toISOString().slice(0, 10);
                    const todayData = Object.values(ACIUApp.data.learningHistory.attempts)
                        .filter(attempt => attempt.timestamp.slice(0, 10) === today);
                    const todaySolved = todayData.length;
                    const todayCorrect = todayData.filter(attempt => attempt.correct).length;
                    const dailyRate = todaySolved > 0 ? Math.round((todayCorrect / todaySolved) * 100) : 0;
                    
                    // UI ì—…ë°ì´íŠ¸
                    document.getElementById('completed-questions').textContent = solvedQcodes.size.toLocaleString();
                    document.getElementById('overall-progress-rate').textContent = `${overallRate}%`;
                    document.getElementById('daily-progress-rate').textContent = `${dailyRate}%`;
                },

                // ê¸°ë³¸ í•™ìŠµ í†µê³„ ì—…ë°ì´íŠ¸ (ë”ë¯¸ ë°ì´í„°)
                updateBasicLearningStats() {
                    const dummyStats = {
                        totalQuestions: 1379,
                        completedQuestions: 45,
                        correctAnswers: 32,
                        todayQuestions: 8,
                        todayCorrect: 6
                    };
                    
                    // í•™ìŠµ í˜„í™© í†µê³„
                    document.getElementById('learning-progress').textContent = `${Math.round((dummyStats.completedQuestions / dummyStats.totalQuestions) * 100)}%`;
                    
                    // í•™ìŠµ ì„±ê³¼ í†µê³„
                    document.getElementById('learning-performance').textContent = `${Math.round((dummyStats.correctAnswers / dummyStats.completedQuestions) * 100)}%`;
                    
                    // ì˜¤ëŠ˜ì˜ í†µê³„
                    document.getElementById('today-stats').textContent = `${Math.round((dummyStats.todayCorrect / dummyStats.todayQuestions) * 100)}%`;
                },

                // ê³¼ëª©ë³„ ì ìˆ˜ ì¹´ë“œ ì—…ë°ì´íŠ¸ (ë”ë¯¸ ë°ì´í„° ì ìš©)
                updateSubjectCards() {
                    const subjects = ['06ì¬ì‚°ë³´í—˜', '07íŠ¹ì¢…ë³´í—˜', '08ë°°ìƒì±…ì„ë³´í—˜', '09í•´ìƒë³´í—˜'];
                    const scores = [55, 65, 67, 30]; // ë”ë¯¸ ì ìˆ˜
                    const subjectCards = document.getElementById('subject-cards');
                    subjectCards.innerHTML = '';
                    
                    subjects.forEach((subject, index) => {
                        const score = scores[index];
                        const isPass = score >= 40;
                        const card = document.createElement('div');
                        card.className = 'flex justify-between items-center p-2 bg-white rounded border';
                        card.innerHTML = `
                            <div class="flex-1">
                                <div class="font-medium text-sm">${subject}</div>
                                <div class="text-xs text-gray-500">ê¸°ì¤€: 40ì </div>
                            </div>
                            <div class="text-right">
                                <div class="font-bold ${isPass ? 'text-green-600' : 'text-red-600'}">${score}ì </div>
                                <div class="text-xs ${isPass ? 'text-green-600' : 'text-red-600'}">${isPass ? 'í•©ê²©' : 'ë¶ˆí•©ê²©'}</div>
                            </div>
                        `;
                        subjectCards.appendChild(card);
                    });
                },

                // ì „ì²´ ìš”ì•½ ì¹´ë“œ ì—…ë°ì´íŠ¸ (ë”ë¯¸ ë°ì´í„° ì ìš©)
                updateSummaryCards() {
                    const scores = [55, 65, 67, 30]; // ë”ë¯¸ ì ìˆ˜
                    const overallScore = Math.round(scores.reduce((a, b) => a + b, 0) / scores.length);
                    const lowestScore = Math.min(...scores);
                    const isPass = overallScore >= 60 && lowestScore >= 40;
                    
                    const summaryCards = document.getElementById('summary-cards');
                    summaryCards.innerHTML = '';
                    
                    // í‰ê·  ì ìˆ˜ ì¹´ë“œ
                    const isAvgPass = overallScore >= 60;
                    const avgCard = document.createElement('div');
                    avgCard.className = 'flex justify-between items-center p-3 bg-white rounded border';
                    avgCard.innerHTML = `
                        <div class="flex-1">
                            <div class="font-semibold">í‰ê· ì ìˆ˜</div>
                            <div class="text-xs text-gray-500">ê¸°ì¤€: 60ì </div>
                        </div>
                        <div class="text-right">
                            <div class="text-lg font-bold ${isAvgPass ? 'text-green-600' : 'text-red-600'}">${overallScore}ì </div>
                            <div class="text-xs ${isAvgPass ? 'text-green-600' : 'text-red-600'}">${isAvgPass ? 'í•©ê²©' : 'ë¶ˆí•©ê²©'}</div>
                        </div>
                    `;
                    summaryCards.appendChild(avgCard);
                    
                    // ìµœì¢… í•©ê²© ì—¬ë¶€ ì¹´ë“œ
                    const finalCard = document.createElement('div');
                    finalCard.className = `flex justify-between items-center p-3 rounded border ${isPass ? 'bg-green-100 border-green-300' : 'bg-red-100 border-red-300'}`;
                    finalCard.innerHTML = `
                        <div class="flex-1">
                            <div class="font-bold">ìµœì¢…í•©ê²©ì—¬ë¶€</div>
                            <div class="text-xs text-gray-500">ëª¨ë“  ì¡°ê±´ ë§Œì¡±</div>
                        </div>
                        <div class="text-right">
                            <div class="text-lg font-bold ${isPass ? 'text-green-600' : 'text-red-600'}">${isPass ? 'í•©ê²©' : 'ë¶ˆí•©ê²©'}</div>
                            <div class="text-xs ${isPass ? 'text-green-600' : 'text-red-600'}">${isPass ? 'ğŸ‰' : 'âš ï¸'}</div>
                        </div>
                    `;
                    summaryCards.appendChild(finalCard);
                },

                // í˜„ì¬ ì‹œê°„ ì—…ë°ì´íŠ¸
                updateCurrentTime() {
                    const now = new Date();
                    const timeString = now.toLocaleString('ko-KR', {
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric',
                        weekday: 'long',
                        hour: '2-digit',
                        minute: '2-digit',
                        second: '2-digit',
                        hour12: true
                    });
                    document.getElementById('current-time').textContent = timeString;
                },

                // D-Day ì—…ë°ì´íŠ¸
                updateDdayCount() {
                    const examDate = new Date(ACIUApp.data.userSettings.examDate);
                    const today = new Date();
                    const diffTime = examDate.getTime() - today.getTime();
                    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                    
                    document.getElementById('exam-dday').textContent = `D-${Math.max(0, diffDays)}ì¼`;
                },

                // ëª…ì–¸ ì—…ë°ì´íŠ¸
                updateQuote() {
                    const quotes = [
                        "í•™ìŠµì€ ê°€ì¥ ì¢‹ì€ íˆ¬ìì…ë‹ˆë‹¤.",
                        "ê¾¸ì¤€í•¨ì´ ìµœê³ ì˜ ì¬ëŠ¥ì…ë‹ˆë‹¤.",
                        "ì˜¤ëŠ˜ì˜ ë…¸ë ¥ì´ ë‚´ì¼ì˜ ì„±ê³µì„ ë§Œë“­ë‹ˆë‹¤.",
                        "ì‹¤íŒ¨ëŠ” ì„±ê³µì˜ ì–´ë¨¸ë‹ˆì…ë‹ˆë‹¤.",
                        "ì‘ì€ ì§„ì „ë„ í° ì„±ì·¨ì˜ ì‹œì‘ì…ë‹ˆë‹¤.",
                        "ëê¹Œì§€ ê°€ëŠ” ìê°€ ì´ê¸´ë‹¤.",
                        "ìì‹ ì„ ë¯¿ì–´ë¼, ë‹¹ì‹ ì€ í•  ìˆ˜ ìˆë‹¤.",
                        "ì‹œê°„ì€ ê°€ì¥ ê·€ì¤‘í•œ ìì‚°ì…ë‹ˆë‹¤.",
                        "ëª©í‘œë¥¼ í–¥í•´ í•œ ê±¸ìŒì”© ë‚˜ì•„ê°€ë¼.",
                        "ë°°ì›€ì—ëŠ” ëì´ ì—†ë‹¤."
                    ];
                    
                    const randomQuote = quotes[Math.floor(Math.random() * quotes.length)];
                    document.getElementById('quote-of-day').textContent = `"${randomQuote}"`;
                },

                // ì„¤ì • ëª¨ë‹¬ í‘œì‹œ
                showSettingsModal() {
                    document.getElementById('user-name-input').value = ACIUApp.data.userSettings.name;
                    document.getElementById('exam-date-input').value = ACIUApp.data.userSettings.examDate;
                    document.getElementById('settings-modal').classList.remove('hidden');
                },

                // ì„¤ì • ëª¨ë‹¬ ìˆ¨ê¸°ê¸°
                hideSettingsModal() {
                    document.getElementById('settings-modal').classList.add('hidden');
                },

                // ì„¤ì • ì €ì¥
                saveSettings() {
                    const name = document.getElementById('user-name-input').value.trim();
                    const examDate = document.getElementById('exam-date-input').value;
                    
                    if (name) {
                        ACIUApp.data.userSettings.name = name;
                    }
                    if (examDate) {
                        ACIUApp.data.userSettings.examDate = examDate;
                    }
                    
                    ACIUApp.data.userSettings.lastUpdated = new Date().toISOString();
                    ACIUApp.data.saveUserSettings();
                    this.updateHeader();
                    this.hideSettingsModal();
                },

                // í†µê³„ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
                loadStatisticsData() {
                    console.log('í†µê³„ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° ì‹œì‘');
                    
                    // í†µê³„ ì„¹ì…˜ í‘œì‹œ
                    document.getElementById('statistics-section').classList.remove('hidden');
                    
                    // í†µê³„ ì—…ë°ì´íŠ¸
                    this.updateSubjectCards();
                    this.updateSummaryCards();
                    
                    console.log('í†µê³„ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° ì™„ë£Œ');
                },

                // ì˜¤ë¥˜ ë©”ì‹œì§€ í‘œì‹œ
                showErrorMessage(message) {
                    alert(message);
                },

                // í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°
                goToHome() {
                    console.log('í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°');
                    
                    // ê¸°ë³¸ í•™ìŠµ í™”ë©´ ìˆ¨ê¸°ê¸°
                    document.getElementById('basic-learning-screen').classList.add('hidden');
                    
                    // ë©”ì¸ í™”ë©´ í‘œì‹œ
                    document.querySelector('.container').classList.remove('hidden');
                    
                    // í˜„ì¬ ëª¨ë“œ ì—…ë°ì´íŠ¸
                    document.getElementById('current-mode').textContent = 'ëª¨ë“œ ì„ íƒ';
                }
            },

            // í•™ìŠµ ì—”ì§„
            learning: {
                // í•™ìŠµ ìƒíƒœ ë³€ìˆ˜
                currentQuestionIndex: 0,
                filteredQuestions: [],
                selectedAnswer: null,
                currentQuestion: null,
                isAnswerChecked: false,

                // ê¸°ë³¸ í•™ìŠµ ëª¨ë“œ ì‹œì‘
                startMode(mode) {
                    console.log(`í•™ìŠµ ëª¨ë“œ ì‹œì‘: ${mode}`);
                    
                    if (mode === 'basic') {
                        this.startBasicLearning();
                    } else {
                        alert(`${mode} ëª¨ë“œê°€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.`);
                    }
                },

                // ê¸°ë³¸ í•™ìŠµ ì‹œì‘
                startBasicLearning() {
                    console.log('ê¸°ë³¸ í•™ìŠµ ëª¨ë“œ ì‹œì‘');
                    
                    // ë©”ì¸ í™”ë©´ ìˆ¨ê¸°ê¸°
                    document.querySelector('.container').classList.add('hidden');
                    
                    // ê¸°ë³¸ í•™ìŠµ í™”ë©´ í‘œì‹œ
                    document.getElementById('basic-learning-screen').classList.remove('hidden');
                    
                    // í˜„ì¬ ëª¨ë“œ ì—…ë°ì´íŠ¸
                    document.getElementById('current-mode').textContent = 'ê¸°ë³¸ í•™ìŠµ';
                    
                    // ë¬¸ì œ ëª©ë¡ ì„¤ì •
                    this.filteredQuestions = ACIUApp.data.questions;
                    this.currentQuestionIndex = 0;
                    
                    // ê¸°ë³¸ í•™ìŠµ í†µê³„ ì—…ë°ì´íŠ¸
                    ACIUApp.ui.updateBasicLearningStats();
                    
                    console.log(`ì´ ${this.filteredQuestions.length}ê°œ ë¬¸ì œ ë¡œë“œë¨`);
                },

                // ì´ì–´í’€ê¸° ì‹œì‘
                startContinue() {
                    console.log('ì´ì–´í’€ê¸° ì‹œì‘');
                    this.startQuestionMode();
                },

                // ì²˜ìŒë¶€í„° í’€ê¸° ì‹œì‘
                startFromBeginning() {
                    console.log('ì²˜ìŒë¶€í„° í’€ê¸° ì‹œì‘');
                    this.currentQuestionIndex = 0;
                    this.startQuestionMode();
                },

                // ëœë¤ í’€ê¸° ì‹œì‘
                startRandom() {
                    console.log('ëœë¤ í’€ê¸° ì‹œì‘');
                    this.currentQuestionIndex = Math.floor(Math.random() * this.filteredQuestions.length);
                    this.startQuestionMode();
                },

                // ë¬¸ì œ í’€ì´ ëª¨ë“œ ì‹œì‘
                startQuestionMode() {
                    console.log('ë¬¸ì œ í’€ì´ ëª¨ë“œ ì‹œì‘');
                    
                    // ë¬¸ì œ ì˜ì—­ í‘œì‹œ
                    document.getElementById('question-area').classList.remove('hidden');
                    
                    // ì²« ë²ˆì§¸ ë¬¸ì œ í‘œì‹œ
                    this.displayQuestion();
                },

                // ë¬¸ì œ í‘œì‹œ
                displayQuestion() {
                    if (this.currentQuestionIndex >= this.filteredQuestions.length) {
                        alert('ëª¨ë“  ë¬¸ì œë¥¼ í’€ì´í–ˆìŠµë‹ˆë‹¤!');
                        return;
                    }

                    this.currentQuestion = this.filteredQuestions[this.currentQuestionIndex];
                    this.selectedAnswer = null;
                    this.isAnswerChecked = false;

                    console.log('ë¬¸ì œ í‘œì‹œ:', this.currentQuestion);

                    // ë¬¸ì œ ì •ë³´ ì—…ë°ì´íŠ¸
                    document.getElementById('question-type').textContent = this.currentQuestion.TYPE === 'ì§„ìœ„í˜•' ? 'ì§„ìœ„í˜•' : 'ì„ íƒí˜•';
                    document.getElementById('question-code').textContent = this.currentQuestion.QCODE;
                    document.getElementById('layer-info').textContent = `${this.currentQuestion.LAYER1} > ${this.currentQuestion.LAYER2}`;
                    document.getElementById('question-text').textContent = this.currentQuestion.QUESTION;
                    document.getElementById('current-question-number').textContent = this.currentQuestionIndex + 1;
                    document.getElementById('total-questions').textContent = this.filteredQuestions.length;

                    // ë‹µì•ˆ ë²„íŠ¼ ì—…ë°ì´íŠ¸
                    this.updateAnswerButtons();

                    // ê²°ê³¼ ì˜ì—­ ì´ˆê¸°í™”
                    document.getElementById('result-area').classList.add('hidden');
                    document.getElementById('explanation-btn').classList.add('hidden');

                    // ë‹µì•ˆ ë²„íŠ¼ ì´ˆê¸°í™”
                    this.resetAnswerButtons();
                },

                // ë‹µì•ˆ ë²„íŠ¼ ì—…ë°ì´íŠ¸
                updateAnswerButtons() {
                    const answerButtons = document.getElementById('answer-buttons');
                    answerButtons.innerHTML = '';

                    if (this.currentQuestion.TYPE === 'ì§„ìœ„í˜•') {
                        // ì§„ìœ„í˜• ë²„íŠ¼
                        const oButton = document.createElement('button');
                        oButton.className = 'answer-btn bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-lg';
                        oButton.setAttribute('data-answer', 'O');
                        oButton.onclick = () => this.selectAnswer('O');
                        oButton.textContent = 'O';
                        answerButtons.appendChild(oButton);

                        const xButton = document.createElement('button');
                        xButton.className = 'answer-btn bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-6 rounded-lg';
                        xButton.setAttribute('data-answer', 'X');
                        xButton.onclick = () => this.selectAnswer('X');
                        xButton.textContent = 'X';
                        answerButtons.appendChild(xButton);
                    } else {
                        // ì„ íƒí˜• ë²„íŠ¼
                        for (let i = 1; i <= 4; i++) {
                            const button = document.createElement('button');
                            button.className = 'answer-btn bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-lg';
                            button.setAttribute('data-answer', i.toString());
                            button.onclick = () => this.selectAnswer(i.toString());
                            button.textContent = i.toString();
                            answerButtons.appendChild(button);
                        }
                    }
                },

                // ë‹µì•ˆ ì„ íƒ
                selectAnswer(answer) {
                    console.log('ë‹µì•ˆ ì„ íƒ:', answer);
                    this.selectedAnswer = answer;
                    
                    // ëª¨ë“  ë‹µì•ˆ ë²„íŠ¼ ì´ˆê¸°í™”
                    this.resetAnswerButtons();
                    
                    // ì„ íƒëœ ë‹µì•ˆ ë²„íŠ¼ ê°•ì¡°
                    const selectedButton = document.querySelector(`[data-answer="${answer}"]`);
                    if (selectedButton) {
                        selectedButton.classList.remove('bg-blue-500', 'bg-red-500', 'bg-gray-500');
                        selectedButton.classList.add('bg-yellow-500');
                    }
                },

                // ë‹µì•ˆ ë²„íŠ¼ ì´ˆê¸°í™”
                resetAnswerButtons() {
                    const buttons = document.querySelectorAll('.answer-btn');
                    buttons.forEach(button => {
                        button.classList.remove('bg-yellow-500');
                        if (button.getAttribute('data-answer') === 'O') {
                            button.classList.add('bg-blue-500');
                        } else if (button.getAttribute('data-answer') === 'X') {
                            button.classList.add('bg-red-500');
                        } else {
                            button.classList.add('bg-gray-500');
                        }
                    });
                },

                // ì •ë‹µ í™•ì¸
                checkAnswer() {
                    if (!this.selectedAnswer) {
                        alert('ë‹µì•ˆì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                        return;
                    }

                    console.log('ì •ë‹µ í™•ì¸');
                    this.isAnswerChecked = true;

                    const isCorrect = this.selectedAnswer === this.currentQuestion.ANSWER;
                    const resultArea = document.getElementById('result-area');
                    const resultMessage = document.getElementById('result-message');

                    // ê²°ê³¼ ë©”ì‹œì§€ ì„¤ì •
                    if (isCorrect) {
                        resultMessage.className = 'p-4 rounded-lg bg-green-100 text-green-800';
                        resultMessage.innerHTML = `
                            <div class="flex items-center">
                                <span class="text-2xl mr-2">âœ…</span>
                                <span class="font-bold">ì •ë‹µì…ë‹ˆë‹¤!</span>
                            </div>
                        `;
                    } else {
                        resultMessage.className = 'p-4 rounded-lg bg-red-100 text-red-800';
                        resultMessage.innerHTML = `
                            <div class="flex items-center">
                                <span class="text-2xl mr-2">âŒ</span>
                                <span class="font-bold">í‹€ë ¸ìŠµë‹ˆë‹¤.</span>
                                <span class="ml-2">ì •ë‹µ: ${this.currentQuestion.ANSWER}</span>
                            </div>
                        `;
                    }

                    // ê²°ê³¼ ì˜ì—­ í‘œì‹œ
                    resultArea.classList.remove('hidden');

                    // í•´ì„¤ ë²„íŠ¼ í‘œì‹œ
                    document.getElementById('explanation-btn').classList.remove('hidden');

                    // í•™ìŠµ ì´ë ¥ ì €ì¥
                    this.saveLearningHistory(isCorrect);
                },

                // ë‹¤ìŒ ë¬¸ì œ
                nextQuestion() {
                    if (this.currentQuestionIndex < this.filteredQuestions.length - 1) {
                        this.currentQuestionIndex++;
                        this.displayQuestion();
                    } else {
                        alert('ë§ˆì§€ë§‰ ë¬¸ì œì…ë‹ˆë‹¤.');
                    }
                },

                // ì´ì „ ë¬¸ì œ
                prevQuestion() {
                    if (this.currentQuestionIndex > 0) {
                        this.currentQuestionIndex--;
                        this.displayQuestion();
                    } else {
                        alert('ì²« ë²ˆì§¸ ë¬¸ì œì…ë‹ˆë‹¤.');
                    }
                },

                // í•´ì„¤ ë³´ê¸°
                showExplanation() {
                    if (this.currentQuestion.EXPLAIN) {
                        alert(`í•´ì„¤: ${this.currentQuestion.EXPLAIN}`);
                    } else {
                        alert('í•´ì„¤ì´ ì¤€ë¹„ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
                    }
                },

                // í•™ìŠµ ì´ë ¥ ì €ì¥
                saveLearningHistory(isCorrect) {
                    if (!this.currentQuestion) return;

                    const learningData = {
                        qcode: this.currentQuestion.QCODE,
                        timestamp: new Date().toISOString(),
                        isCorrect: isCorrect,
                        layer1: this.currentQuestion.LAYER1,
                        layer2: this.currentQuestion.LAYER2,
                        mode: 'basic'
                    };

                    let history = JSON.parse(localStorage.getItem('aciu_learning_history')) || [];
                    history.push(learningData);
                    localStorage.setItem('aciu_learning_history', JSON.stringify(history));

                    console.log('í•™ìŠµ ì´ë ¥ ì €ì¥ë¨:', learningData);
                }
            }
        };

        // ACIUApp ì´ˆê¸°í™” í•¨ìˆ˜
        ACIUApp.init = async function() {
            console.log('ACIUApp ì´ˆê¸°í™” ì‹œì‘');
            
            // ë¸Œë¼ìš°ì € í˜¸í™˜ì„± í™•ì¸
            this.compatibility.checkBrowserSupport();
            
            // ë°ì´í„° ë¡œë”©
            await this.data.loadQuestions();
            this.data.loadUserSettings();
            this.data.loadLearningHistory();
            
            // UI ì´ˆê¸°í™”
            this.ui.init();
            
            console.log('ACIUApp ì´ˆê¸°í™” ì™„ë£Œ');
        };

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        window.addEventListener('load', function() {
            ACIUApp.init();
        });
    </script>
</body>
</html> 
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AICU QUIZ ì•± v3.8.1</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Papa Parse ë¼ì´ë¸ŒëŸ¬ë¦¬ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
    
    <style>
        /* ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
        .hidden {
            display: none !important;
        }
        
        .answer-btn {
            transition: all 0.3s ease;
        }
        
        .answer-btn:hover {
            transform: translateY(-2px);
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <!-- ê¸°ë³¸ ì»¨í…Œì´ë„ˆ -->
    <div id="app" class="container mx-auto px-4 py-8">
        <h1 class="text-3xl font-bold text-center text-gray-800 mb-8">
            AICU QUIZ ì•± v3.8.1
        </h1>
        
        <!-- í™ˆ í™”ë©´ (ëª¨ë“ˆ 3.1) -->
        <div id="home-screen" class="bg-white rounded-lg shadow-md p-8">
            <h2 class="text-2xl font-semibold text-center mb-8">í•™ìŠµ ëª¨ë“œ ì„ íƒ</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- ê¸°ë³¸í•™ìŠµ ëª¨ë“œ -->
                <div class="bg-blue-50 rounded-lg p-6 hover:bg-blue-100 transition-colors cursor-pointer" onclick="selectLearningMode('basic')">
                    <div class="text-center">
                        <div class="text-4xl mb-4">ğŸ“š</div>
                        <h3 class="text-xl font-semibold text-blue-800 mb-2">ê¸°ë³¸í•™ìŠµ</h3>
                        <p class="text-blue-600">ì´ì–´í’€ê¸°, ì²˜ìŒí’€ê¸°, ëœë¤í’€ê¸°ë¡œ í•™ìŠµí•˜ì„¸ìš”</p>
                    </div>
                </div>
                
                <!-- ëŒ€ë¶„ë¥˜í•™ìŠµ ëª¨ë“œ -->
                <div class="bg-green-50 rounded-lg p-6 hover:bg-green-100 transition-colors cursor-pointer" onclick="selectLearningMode('large-category')">
                    <div class="text-center">
                        <div class="text-4xl mb-4">ğŸ¢</div>
                        <h3 class="text-xl font-semibold text-green-800 mb-2">ëŒ€ë¶„ë¥˜í•™ìŠµ</h3>
                        <p class="text-green-600">ì¬ì‚°ë³´í—˜, íŠ¹ì¢…ë³´í—˜, ë°°ìƒì±…ì„ë³´í—˜, í•´ìƒë³´í—˜</p>
                    </div>
                </div>
            </div>
            
            <!-- ê°œë°œì í…ŒìŠ¤íŠ¸ ì˜ì—­ (ìˆ¨ê¹€) -->
            <div id="dev-test-area" class="mt-8 p-4 bg-gray-100 rounded-lg hidden">
                <h3 class="text-lg font-semibold mb-4">ê°œë°œì í…ŒìŠ¤íŠ¸</h3>
                <div id="test-results" class="space-y-2">
                    <div id="html-test" class="text-sm">HTML êµ¬ì¡°: í…ŒìŠ¤íŠ¸ ì¤‘...</div>
                    <div id="css-test" class="text-sm">CSS ìŠ¤íƒ€ì¼: í…ŒìŠ¤íŠ¸ ì¤‘...</div>
                    <div id="js-test" class="text-sm">JavaScript ë¼ì´ë¸ŒëŸ¬ë¦¬: í…ŒìŠ¤íŠ¸ ì¤‘...</div>
                    <hr class="my-4">
                    <div id="config-test" class="text-sm">ì„¤ì • ê°ì²´: í…ŒìŠ¤íŠ¸ ì¤‘...</div>
                    <div id="basic-config-test" class="text-sm">ê¸°ë³¸í•™ìŠµ ì„¤ì •: í…ŒìŠ¤íŠ¸ ì¤‘...</div>
                    <div id="large-config-test" class="text-sm">ëŒ€ë¶„ë¥˜í•™ìŠµ ì„¤ì •: í…ŒìŠ¤íŠ¸ ì¤‘...</div>
                    <hr class="my-4">
                    <div id="data-load-test" class="text-sm">ë°ì´í„° ë¡œë“œ: í…ŒìŠ¤íŠ¸ ì¤‘...</div>
                    <div class="flex space-x-2 mt-2">
                        <button onclick="loadCategoryData('ì¬ì‚°ë³´í—˜')" class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm">
                            ì¬ì‚°ë³´í—˜ ë¡œë“œ
                        </button>
                        <button onclick="loadCategoryData('íŠ¹ì¢…ë³´í—˜')" class="bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded text-sm">
                            íŠ¹ì¢…ë³´í—˜ ë¡œë“œ
                        </button>
                        <button onclick="loadCategoryData('ë°°ìƒì±…ì„ë³´í—˜')" class="bg-yellow-500 hover:bg-yellow-600 text-white px-3 py-1 rounded text-sm">
                            ë°°ìƒì±…ì„ë³´í—˜ ë¡œë“œ
                        </button>
                        <button onclick="loadCategoryData('í•´ìƒë³´í—˜')" class="bg-purple-500 hover:bg-purple-600 text-white px-3 py-1 rounded text-sm">
                            í•´ìƒë³´í—˜ ë¡œë“œ
                        </button>
                    </div>
                    <hr class="my-4">
                    <div id="display-test" class="text-sm">ë¬¸ì œ í‘œì‹œ: í…ŒìŠ¤íŠ¸ ì¤‘...</div>
                    <div class="flex space-x-2 mt-2">
                        <button onclick="testDisplayQuestion()" class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm">
                            ë¬¸ì œ í‘œì‹œ í…ŒìŠ¤íŠ¸
                        </button>
                    </div>
                    <hr class="my-4">
                    <div id="select-test" class="text-sm">ë‹µì•ˆ ì„ íƒ: í…ŒìŠ¤íŠ¸ ì¤‘...</div>
                    <div class="flex space-x-2 mt-2">
                        <button onclick="testSelectAnswer()" class="bg-orange-500 hover:bg-orange-600 text-white px-3 py-1 rounded text-sm">
                            ë‹µì•ˆ ì„ íƒ í…ŒìŠ¤íŠ¸
                        </button>
                    </div>
                    <hr class="my-4">
                    <div id="check-test" class="text-sm">ì •ë‹µ í™•ì¸: í…ŒìŠ¤íŠ¸ ì¤‘...</div>
                    <div class="flex space-x-2 mt-2">
                        <button onclick="testCheckAnswer()" class="bg-pink-500 hover:bg-pink-600 text-white px-3 py-1 rounded text-sm">
                            ì •ë‹µ í™•ì¸ í…ŒìŠ¤íŠ¸
                        </button>
                    </div>
                    <hr class="my-4">
                    <div id="next-test" class="text-sm">ë‹¤ìŒ ë¬¸ì œ: í…ŒìŠ¤íŠ¸ ì¤‘...</div>
                    <div class="flex space-x-2 mt-2">
                        <button onclick="testNextQuestion()" class="bg-indigo-500 hover:bg-indigo-600 text-white px-3 py-1 rounded text-sm">
                            ë‹¤ìŒ ë¬¸ì œ í…ŒìŠ¤íŠ¸
                        </button>
                    </div>
                    <hr class="my-4">
                    <div class="text-sm font-semibold">ì¢…í•© í…ŒìŠ¤íŠ¸</div>
                    <div class="flex space-x-2 mt-2">
                        <button onclick="comprehensiveTest()" class="bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-sm">
                            ì¢…í•© ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
                        </button>
                    </div>
                    <hr class="my-4">
                    <div class="text-sm font-semibold">ì„±ëŠ¥ ìµœì í™”</div>
                    <div class="flex space-x-2 mt-2">
                        <button onclick="optimizePerformance()" class="bg-purple-600 hover:bg-purple-700 text-white px-3 py-1 rounded text-sm">
                            ì„±ëŠ¥ ìµœì í™”
                        </button>
                        <button onclick="testPerformance()" class="bg-indigo-600 hover:bg-indigo-700 text-white px-3 py-1 rounded text-sm">
                            ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ê¸°ë³¸í•™ìŠµ í™”ë©´ (ëª¨ë“ˆ 3.2) -->
        <div id="basic-learning-screen" class="bg-white rounded-lg shadow-md p-8 hidden">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-semibold">ê¸°ë³¸í•™ìŠµ</h2>
                <button onclick="goHome()" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg">
                    í™ˆìœ¼ë¡œ
                </button>
            </div>
            
            <!-- í•™ìŠµ ë°©ì‹ ì„ íƒ -->
            <div class="mb-8">
                <h3 class="text-lg font-semibold mb-4">í•™ìŠµ ë°©ì‹ ì„ íƒ</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <button onclick="selectBasicLearningMode('continue')" class="bg-blue-500 hover:bg-blue-600 text-white p-4 rounded-lg text-center">
                        <div class="text-2xl mb-2">ğŸ”„</div>
                        <div class="font-semibold">ì´ì–´í’€ê¸°</div>
                        <div class="text-sm opacity-90">ì´ì „ ì§„í–‰ìƒí™©ë¶€í„° ê³„ì†</div>
                    </button>
                    <button onclick="selectBasicLearningMode('restart')" class="bg-green-500 hover:bg-green-600 text-white p-4 rounded-lg text-center">
                        <div class="text-2xl mb-2">ğŸ”„</div>
                        <div class="font-semibold">ì²˜ìŒí’€ê¸°</div>
                        <div class="text-sm opacity-90">ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘</div>
                    </button>
                    <button onclick="selectBasicLearningMode('random')" class="bg-purple-500 hover:bg-purple-600 text-white p-4 rounded-lg text-center">
                        <div class="text-2xl mb-2">ğŸ²</div>
                        <div class="font-semibold">ëœë¤í’€ê¸°</div>
                        <div class="text-sm opacity-90">ë¬´ì‘ìœ„ ìˆœì„œë¡œ í•™ìŠµ</div>
                    </button>
                </div>
            </div>
            
            <!-- ê¸°ë³¸í•™ìŠµ ë¬¸ì œ í‘œì‹œ ì˜ì—­ -->
            <div id="basic-question-area" class="hidden">
                <h3 class="text-lg font-semibold mb-4">ë¬¸ì œ í’€ì´</h3>
                
                <!-- ë¬¸ì œ ì •ë³´ -->
                <div class="mb-4 p-4 bg-gray-50 rounded">
                    <div class="flex justify-between items-center mb-2">
                        <span id="question-type" class="text-sm text-blue-600 font-medium">ì§„ìœ„í˜•</span>
                        <span id="question-code" class="text-sm text-gray-600">Q001</span>
                    </div>
                    <div id="layer-info" class="text-sm text-gray-500 mb-2">ì¬ì‚°ë³´í—˜ > ì¼ë°˜ì¬ì‚°ë³´í—˜</div>
                    <div id="question-text" class="text-lg font-medium">ë¬¸ì œ í…ìŠ¤íŠ¸ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</div>
                </div>
                
                <!-- ë‹µì•ˆ ë²„íŠ¼ ì˜ì—­ -->
                <div id="answer-buttons" class="mb-4">
                    <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë  ë‹µì•ˆ ë²„íŠ¼ë“¤ -->
                </div>
                
                <!-- ê²°ê³¼ í‘œì‹œ ì˜ì—­ -->
                <div id="result-area" class="hidden">
                    <div id="result-message" class="p-3 rounded font-medium"></div>
                </div>
                
                <!-- ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ -->
                <div class="flex justify-between mt-4">
                    <button onclick="prevQuestion('basic')" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg">
                        ì´ì „ ë¬¸ì œ
                    </button>
                    <button onclick="checkAnswer('basic')" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg">
                        ì •ë‹µ í™•ì¸
                    </button>
                    <button onclick="nextQuestion('basic')" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg">
                        ë‹¤ìŒ ë¬¸ì œ
                    </button>
                </div>
                
                <!-- í†µê³„ ì •ë³´ -->
                <div class="mt-6 p-4 bg-blue-50 rounded">
                    <h4 class="font-semibold mb-2">í•™ìŠµ í†µê³„</h4>
                    <div class="grid grid-cols-3 gap-4 text-center">
                        <div>
                            <div class="text-2xl font-bold text-blue-600" id="total-questions">0</div>
                            <div class="text-sm text-gray-600">ì´ ë¬¸ì œ</div>
                        </div>
                        <div>
                            <div class="text-2xl font-bold text-green-600" id="correct-answers">0</div>
                            <div class="text-sm text-gray-600">ì •ë‹µ</div>
                        </div>
                        <div>
                            <div class="text-2xl font-bold text-red-600" id="incorrect-answers">0</div>
                            <div class="text-sm text-gray-600">ì˜¤ë‹µ</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ëŒ€ë¶„ë¥˜í•™ìŠµ í™”ë©´ (ëª¨ë“ˆ 3.3) -->
        <div id="large-category-screen" class="bg-white rounded-lg shadow-md p-8 hidden">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-semibold">ëŒ€ë¶„ë¥˜í•™ìŠµ</h2>
                <button onclick="goHome()" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg">
                    í™ˆìœ¼ë¡œ
                </button>
            </div>
            
            <!-- ì¹´í…Œê³ ë¦¬ ì„ íƒ -->
            <div class="mb-8">
                <h3 class="text-lg font-semibold mb-4">ì¹´í…Œê³ ë¦¬ ì„ íƒ</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                    <button onclick="selectLargeCategory('ì¬ì‚°ë³´í—˜')" class="bg-blue-500 hover:bg-blue-600 text-white p-4 rounded-lg text-center">
                        <div class="text-2xl mb-2">ğŸ¢</div>
                        <div class="font-semibold">ì¬ì‚°ë³´í—˜</div>
                        <div class="text-sm opacity-90">ì¼ë°˜ì¬ì‚°ë³´í—˜</div>
                    </button>
                    <button onclick="selectLargeCategory('íŠ¹ì¢…ë³´í—˜')" class="bg-green-500 hover:bg-green-600 text-white p-4 rounded-lg text-center">
                        <div class="text-2xl mb-2">ğŸš—</div>
                        <div class="font-semibold">íŠ¹ì¢…ë³´í—˜</div>
                        <div class="text-sm opacity-90">ìë™ì°¨ë³´í—˜</div>
                    </button>
                    <button onclick="selectLargeCategory('ë°°ìƒì±…ì„ë³´í—˜')" class="bg-yellow-500 hover:bg-yellow-600 text-white p-4 rounded-lg text-center">
                        <div class="text-2xl mb-2">âš–ï¸</div>
                        <div class="font-semibold">ë°°ìƒì±…ì„ë³´í—˜</div>
                        <div class="text-sm opacity-90">ì±…ì„ë³´í—˜</div>
                    </button>
                    <button onclick="selectLargeCategory('í•´ìƒë³´í—˜')" class="bg-purple-500 hover:bg-purple-600 text-white p-4 rounded-lg text-center">
                        <div class="text-2xl mb-2">ğŸš¢</div>
                        <div class="font-semibold">í•´ìƒë³´í—˜</div>
                        <div class="text-sm opacity-90">í•´ìƒë³´í—˜</div>
                    </button>
                </div>
            </div>
            
            <!-- ëŒ€ë¶„ë¥˜í•™ìŠµ ë¬¸ì œ í‘œì‹œ ì˜ì—­ -->
            <div id="large-category-question-area" class="hidden">
                <h3 class="text-lg font-semibold mb-4">ë¬¸ì œ í’€ì´</h3>
                
                <!-- ë¬¸ì œ ì •ë³´ -->
                <div class="mb-4 p-4 bg-gray-50 rounded">
                    <div class="flex justify-between items-center mb-2">
                        <span id="large-category-question-type" class="text-sm text-blue-600 font-medium">ì§„ìœ„í˜•</span>
                        <span id="large-category-question-code" class="text-sm text-gray-600">Q001</span>
                    </div>
                    <div id="large-category-layer-info" class="text-sm text-gray-500 mb-2">ì¬ì‚°ë³´í—˜ > ì¼ë°˜ì¬ì‚°ë³´í—˜</div>
                    <div id="large-category-question-text" class="text-lg font-medium">ë¬¸ì œ í…ìŠ¤íŠ¸ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</div>
                </div>
                
                <!-- ë‹µì•ˆ ë²„íŠ¼ ì˜ì—­ -->
                <div id="large-category-answer-buttons" class="mb-4">
                    <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë  ë‹µì•ˆ ë²„íŠ¼ë“¤ -->
                </div>
                
                <!-- ê²°ê³¼ í‘œì‹œ ì˜ì—­ -->
                <div id="large-category-result-area" class="hidden">
                    <div id="large-category-result-message" class="p-3 rounded font-medium"></div>
                </div>
                
                <!-- ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ -->
                <div class="flex justify-between mt-4">
                    <button onclick="prevQuestion('large-category')" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-lg">
                        ì´ì „ ë¬¸ì œ
                    </button>
                    <button onclick="checkAnswer('large-category')" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg">
                        ì •ë‹µ í™•ì¸
                    </button>
                    <button onclick="nextQuestion('large-category')" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg">
                        ë‹¤ìŒ ë¬¸ì œ
                    </button>
                </div>
                
                <!-- í†µê³„ ì •ë³´ -->
                <div class="mt-6 p-4 bg-green-50 rounded">
                    <h4 class="font-semibold mb-2">í•™ìŠµ í†µê³„</h4>
                    <div class="grid grid-cols-3 gap-4 text-center">
                        <div>
                            <div class="text-2xl font-bold text-green-600" id="large-total-questions">0</div>
                            <div class="text-sm text-gray-600">ì´ ë¬¸ì œ</div>
                        </div>
                        <div>
                            <div class="text-2xl font-bold text-green-600" id="large-correct-answers">0</div>
                            <div class="text-sm text-gray-600">ì •ë‹µ</div>
                        </div>
                        <div>
                            <div class="text-2xl font-bold text-red-600" id="large-incorrect-answers">0</div>
                            <div class="text-sm text-gray-600">ì˜¤ë‹µ</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ê¸°ë³¸ ìƒíƒœ í‘œì‹œ -->
        <div id="status" class="text-center text-gray-600 mb-4">
            ì•± ì´ˆê¸°í™” ì¤‘...
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // ëª¨ë“ˆ 1.2: ëª¨ë“œë³„ ì„¤ì • ê°ì²´
        const MODE_CONFIG = {
            'basic': {
                resultArea: 'result-area',
                questionText: 'question-text',
                questionCode: 'question-code',
                questionType: 'question-type',
                layerInfo: 'layer-info',
                answerButtons: 'answer-buttons',
                resultMessage: 'result-message',
                prevButton: 'prev-button',
                nextButton: 'next-button',
                checkButton: 'check-button'
            },
            'large-category': {
                resultArea: 'large-category-result-area',
                questionText: 'large-category-question-text',
                questionCode: 'large-category-question-code',
                questionType: 'large-category-question-type',
                layerInfo: 'large-category-layer-info',
                answerButtons: 'large-category-answer-buttons',
                resultMessage: 'large-category-result-message',
                prevButton: 'large-category-prev-button',
                nextButton: 'large-category-next-button',
                checkButton: 'large-category-check-button'
            }
        };

        // ëª¨ë“ˆ 1.3: ë°ì´í„° ë¡œë“œ í•¨ìˆ˜
        function loadCategoryData(category) {
            console.log(`=== ${category} ì¹´í…Œê³ ë¦¬ ë°ì´í„° ë¡œë“œ ì‹œì‘ ===`);
            
            // ì¹´í…Œê³ ë¦¬ë³„ íŒŒì¼ëª… ë§¤í•‘
            const fileMap = {
                'ì¬ì‚°ë³´í—˜': 'ins_1db.csv',
                'íŠ¹ì¢…ë³´í—˜': 'ins_2db.csv',
                'ë°°ìƒì±…ì„ë³´í—˜': 'ins_3db.csv',
                'í•´ìƒë³´í—˜': 'ins_4db.csv'
            };
            
            const filename = fileMap[category];
            if (!filename) {
                console.error(`ì•Œ ìˆ˜ ì—†ëŠ” ì¹´í…Œê³ ë¦¬: ${category}`);
                return;
            }
            
            console.log(`${category} ì¹´í…Œê³ ë¦¬ íŒŒì¼ ë¡œë“œ: ${filename}`);
            
            Papa.parse(filename, {
                download: true,
                header: true,
                complete: (results) => {
                    console.log(`${category} CSV ë°ì´í„° ë¡œë“œ ì™„ë£Œ:`, results.data.length, 'ê°œ ë¬¸ì œ');
                    console.log('ì²« ë²ˆì§¸ ë°ì´í„° ìƒ˜í”Œ:', results.data[0]);
                    
                    // ë°ì´í„° í•„í„°ë§ - ë¹ˆ í–‰ ì œê±°
                    const filteredData = results.data.filter(row =>
                        row.QCODE && row.QUESTION && row.ANSWER && row.QCODE.trim() !== ''
                    );
                    
                    console.log(`í•„í„°ë§ í›„ ë¬¸ì œ ìˆ˜: ${filteredData.length}ê°œ`);
                    console.log('í•„í„°ë§ í›„ ì²« ë²ˆì§¸ ë¬¸ì œ:', filteredData[0]);
                    
                    // ì „ì—­ ë³€ìˆ˜ì— ì €ì¥ (í…ŒìŠ¤íŠ¸ìš©)
                    window.currentCategoryData = {
                        category: category,
                        data: filteredData,
                        filename: filename,
                        totalCount: filteredData.length
                    };
                    
                    // í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì—…ë°ì´íŠ¸
                    updateDataLoadTest(category, filteredData.length, true);
                    
                    console.log(`=== ${category} ì¹´í…Œê³ ë¦¬ ë°ì´í„° ë¡œë“œ ì™„ë£Œ ===`);
                },
                error: (error) => {
                    console.error('CSV ë¡œë“œ ì˜¤ë¥˜:', error);
                    updateDataLoadTest(category, 0, false, error.message);
                }
            });
        }
        
        // ë°ì´í„° ë¡œë“œ í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì—…ë°ì´íŠ¸
        function updateDataLoadTest(category, count, success, errorMessage = '') {
            const testElement = document.getElementById('data-load-test');
            if (success) {
                testElement.textContent = `ë°ì´í„° ë¡œë“œ: âœ… ${category} (${count}ê°œ ë¬¸ì œ)`;
                testElement.classList.add('text-green-600');
            } else {
                testElement.textContent = `ë°ì´í„° ë¡œë“œ: âŒ ${category} - ${errorMessage}`;
                testElement.classList.add('text-red-600');
            }
        }

        // ëª¨ë“ˆ 2.1: ë¬¸ì œ í‘œì‹œ í•¨ìˆ˜
        function displayQuestion(mode = 'large-category', questionIndex = 0) {
            console.log(`=== ë¬¸ì œ í‘œì‹œ í•¨ìˆ˜ ì‹¤í–‰ (ëª¨ë“œ: ${mode}, ì¸ë±ìŠ¤: ${questionIndex}) ===`);
            
            // í˜„ì¬ ì¹´í…Œê³ ë¦¬ ë°ì´í„° í™•ì¸
            if (!window.currentCategoryData || !window.currentCategoryData.data) {
                console.error('ë¡œë“œëœ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤. ë¨¼ì € ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
                updateDisplayTest('ë°ì´í„° ì—†ìŒ', false);
                return;
            }
            
            const questions = window.currentCategoryData.data;
            if (questionIndex >= questions.length) {
                console.error('ë¬¸ì œ ì¸ë±ìŠ¤ê°€ ë²”ìœ„ë¥¼ ë²—ì–´ë‚¬ìŠµë‹ˆë‹¤.');
                updateDisplayTest('ì¸ë±ìŠ¤ ì˜¤ë¥˜', false);
                return;
            }
            
            const question = questions[questionIndex];
            console.log('í‘œì‹œí•  ë¬¸ì œ:', question);
            
            // ëª¨ë“œë³„ ì„¤ì • ê°€ì ¸ì˜¤ê¸°
            const config = MODE_CONFIG[mode];
            if (!config) {
                console.error(`ì•Œ ìˆ˜ ì—†ëŠ” ëª¨ë“œ: ${mode}`);
                updateDisplayTest('ëª¨ë“œ ì˜¤ë¥˜', false);
                return;
            }
            
            try {
                // ë¬¸ì œ ì •ë³´ ì—…ë°ì´íŠ¸
                document.getElementById(config.questionType).textContent = 
                    question.TYPE === 'ì§„ìœ„í˜•' ? 'ì§„ìœ„í˜•' : 'ì„ íƒí˜•';
                document.getElementById(config.questionCode).textContent = question.QCODE;
                document.getElementById(config.layerInfo).textContent = 
                    `${question.LAYER1} > ${question.LAYER2}`;
                document.getElementById(config.questionText).textContent = question.QUESTION;
                
                // ë‹µì•ˆ ë²„íŠ¼ ìƒì„±
                createAnswerButtons(question, mode);
                
                // ë¬¸ì œ í‘œì‹œ ì˜ì—­ í‘œì‹œ
                document.getElementById('large-category-question-area').classList.remove('hidden');
                
                // ê²°ê³¼ ì˜ì—­ ìˆ¨ê¸°ê¸°
                document.getElementById(config.resultArea).classList.add('hidden');
                
                // ì „ì—­ ë³€ìˆ˜ ì—…ë°ì´íŠ¸
                window.currentQuestionIndex = questionIndex;
                window.currentQuestion = question;
                window.currentMode = mode;
                
                // ì§„ë„ ì—…ë°ì´íŠ¸
                updateProgress();
                
                console.log(`ë¬¸ì œ ${questionIndex + 1}/${questions.length} í‘œì‹œ ì™„ë£Œ`);
                updateDisplayTest(`ë¬¸ì œ ${questionIndex + 1} í‘œì‹œ ì„±ê³µ`, true);
                
            } catch (error) {
                console.error('ë¬¸ì œ í‘œì‹œ ì¤‘ ì˜¤ë¥˜:', error);
                updateDisplayTest('í‘œì‹œ ì˜¤ë¥˜', false);
            }
        }
        
        // ë‹µì•ˆ ë²„íŠ¼ ìƒì„± í•¨ìˆ˜
        function createAnswerButtons(question, mode) {
            const config = MODE_CONFIG[mode];
            const buttonsContainer = document.getElementById(config.answerButtons);
            
            // ê¸°ì¡´ ë²„íŠ¼ ì œê±°
            buttonsContainer.innerHTML = '';
            
            if (question.TYPE === 'ì§„ìœ„í˜•') {
                // ì§„ìœ„í˜• ë²„íŠ¼ ìƒì„±
                const oButton = document.createElement('button');
                oButton.className = 'answer-btn bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-lg mr-4';
                oButton.textContent = 'O';
                oButton.setAttribute('data-answer', 'O');
                oButton.onclick = () => selectAnswer('O', mode);
                
                const xButton = document.createElement('button');
                xButton.className = 'answer-btn bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-6 rounded-lg';
                xButton.textContent = 'X';
                xButton.setAttribute('data-answer', 'X');
                xButton.onclick = () => selectAnswer('X', mode);
                
                buttonsContainer.appendChild(oButton);
                buttonsContainer.appendChild(xButton);
                
            } else {
                // ì„ íƒí˜• ë²„íŠ¼ ìƒì„± (1-4ë²ˆ)
                for (let i = 1; i <= 4; i++) {
                    const button = document.createElement('button');
                    button.className = 'answer-btn bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-lg mr-4';
                    button.textContent = i.toString();
                    button.setAttribute('data-answer', i.toString());
                    button.onclick = () => selectAnswer(i.toString(), mode);
                    buttonsContainer.appendChild(button);
                }
            }
        }
        
        // ë¬¸ì œ í‘œì‹œ í…ŒìŠ¤íŠ¸ í•¨ìˆ˜
        function testDisplayQuestion() {
            console.log('=== ë¬¸ì œ í‘œì‹œ í…ŒìŠ¤íŠ¸ ì‹œì‘ ===');
            
            // ë”ë¯¸ ë°ì´í„°ë¡œ í…ŒìŠ¤íŠ¸
            if (!window.currentCategoryData) {
                // í…ŒìŠ¤íŠ¸ìš© ë”ë¯¸ ë°ì´í„° ìƒì„±
                window.currentCategoryData = {
                    category: 'ì¬ì‚°ë³´í—˜',
                    data: [{
                        QCODE: 'Q001',
                        QUESTION: 'ì¬ì‚°ë³´í—˜ì˜ ê¸°ë³¸ ì›ë¦¬ëŠ” ëŒ€ì¸ë°°ìƒê³¼ ëŒ€ë¬¼ë°°ìƒì˜ ë¶„ë¦¬ ì›ì¹™ì´ë‹¤.',
                        ANSWER: 'O',
                        TYPE: 'ì§„ìœ„í˜•',
                        LAYER1: 'ì¬ì‚°ë³´í—˜',
                        LAYER2: 'ì¼ë°˜ì¬ì‚°ë³´í—˜'
                    }],
                    filename: 'ins_1db.csv',
                    totalCount: 1
                };
            }
            
            // ì²« ë²ˆì§¸ ë¬¸ì œ í‘œì‹œ
            displayQuestion('large-category', 0);
        }
        
        // ë¬¸ì œ í‘œì‹œ í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì—…ë°ì´íŠ¸
        function updateDisplayTest(message, success) {
            const testElement = document.getElementById('display-test');
            if (success) {
                testElement.textContent = `ë¬¸ì œ í‘œì‹œ: âœ… ${message}`;
                testElement.classList.add('text-green-600');
            } else {
                testElement.textContent = `ë¬¸ì œ í‘œì‹œ: âŒ ${message}`;
                testElement.classList.add('text-red-600');
            }
        }

        // ëª¨ë“ˆ 2.2: ë‹µì•ˆ ì„ íƒ í•¨ìˆ˜
        function selectAnswer(answer, mode) {
            console.log(`=== ë‹µì•ˆ ì„ íƒ í•¨ìˆ˜ ì‹¤í–‰ (ë‹µì•ˆ: ${answer}, ëª¨ë“œ: ${mode}) ===`);
            
            // ëª¨ë“œë³„ ì„¤ì • ê°€ì ¸ì˜¤ê¸°
            const config = MODE_CONFIG[mode];
            if (!config) {
                console.error(`ì•Œ ìˆ˜ ì—†ëŠ” ëª¨ë“œ: ${mode}`);
                return;
            }
            
            try {
                // ì„ íƒëœ ë‹µì•ˆ ì €ì¥
                window.selectedAnswer = answer;
                console.log('ì„ íƒëœ ë‹µì•ˆ:', answer);
                
                // ëª¨ë“  ë‹µì•ˆ ë²„íŠ¼ ì´ˆê¸°í™”
                resetAnswerButtons(mode);
                
                // ì„ íƒëœ ë²„íŠ¼ í•˜ì´ë¼ì´íŠ¸
                const selectedButton = document.querySelector(`[data-answer="${answer}"]`);
                if (selectedButton) {
                    selectedButton.classList.remove('bg-blue-500', 'bg-red-500', 'bg-gray-500');
                    selectedButton.classList.add('bg-yellow-500');
                    console.log('ì„ íƒëœ ë²„íŠ¼ í•˜ì´ë¼ì´íŠ¸ ì™„ë£Œ');
                } else {
                    console.error('ì„ íƒëœ ë‹µì•ˆ ë²„íŠ¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                }
                
                // í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì—…ë°ì´íŠ¸
                updateSelectTest(`ë‹µì•ˆ "${answer}" ì„ íƒ ì„±ê³µ`, true);
                
            } catch (error) {
                console.error('ë‹µì•ˆ ì„ íƒ ì¤‘ ì˜¤ë¥˜:', error);
                updateSelectTest('ì„ íƒ ì˜¤ë¥˜', false);
            }
        }
        
        // ë‹µì•ˆ ë²„íŠ¼ ì´ˆê¸°í™” í•¨ìˆ˜
        function resetAnswerButtons(mode) {
            const config = MODE_CONFIG[mode];
            const buttons = document.querySelectorAll('.answer-btn');
            
            buttons.forEach(button => {
                const answer = button.getAttribute('data-answer');
                button.classList.remove('bg-yellow-500');
                
                // ê¸°ë³¸ ìƒ‰ìƒìœ¼ë¡œ ë³µì›
                if (answer === 'O') {
                    button.classList.add('bg-blue-500');
                } else if (answer === 'X') {
                    button.classList.add('bg-red-500');
                } else {
                    button.classList.add('bg-gray-500');
                }
            });
        }
        
        // ë‹µì•ˆ ì„ íƒ í…ŒìŠ¤íŠ¸ í•¨ìˆ˜
        function testSelectAnswer() {
            console.log('=== ë‹µì•ˆ ì„ íƒ í…ŒìŠ¤íŠ¸ ì‹œì‘ ===');
            
            // ë¨¼ì € ë¬¸ì œ í‘œì‹œ
            if (!window.currentQuestion) {
                testDisplayQuestion();
                setTimeout(() => {
                    // O ë‹µì•ˆ ì„ íƒ í…ŒìŠ¤íŠ¸
                    selectAnswer('O', 'large-category');
                }, 500);
            } else {
                // O ë‹µì•ˆ ì„ íƒ í…ŒìŠ¤íŠ¸
                selectAnswer('O', 'large-category');
            }
        }
        
        // ë‹µì•ˆ ì„ íƒ í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì—…ë°ì´íŠ¸
        function updateSelectTest(message, success) {
            const testElement = document.getElementById('select-test');
            if (success) {
                testElement.textContent = `ë‹µì•ˆ ì„ íƒ: âœ… ${message}`;
                testElement.classList.add('text-green-600');
            } else {
                testElement.textContent = `ë‹µì•ˆ ì„ íƒ: âŒ ${message}`;
                testElement.classList.add('text-red-600');
            }
        }

        // ëª¨ë“ˆ 2.3: ì •ë‹µ í™•ì¸ í•¨ìˆ˜
        function checkAnswer(mode) {
            console.log(`=== ì •ë‹µ í™•ì¸ í•¨ìˆ˜ ì‹¤í–‰ (ëª¨ë“œ: ${mode}) ===`);
            
            // ì„ íƒëœ ë‹µì•ˆ í™•ì¸
            if (!window.selectedAnswer) {
                alert('ë‹µì•ˆì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                updateCheckTest('ë‹µì•ˆ ë¯¸ì„ íƒ', false);
                return;
            }
            
            // í˜„ì¬ ë¬¸ì œ í™•ì¸
            if (!window.currentQuestion) {
                console.error('í˜„ì¬ ë¬¸ì œê°€ ì—†ìŠµë‹ˆë‹¤.');
                updateCheckTest('ë¬¸ì œ ì—†ìŒ', false);
                return;
            }
            
            // ëª¨ë“œë³„ ì„¤ì • ê°€ì ¸ì˜¤ê¸°
            const config = MODE_CONFIG[mode];
            if (!config) {
                console.error(`ì•Œ ìˆ˜ ì—†ëŠ” ëª¨ë“œ: ${mode}`);
                updateCheckTest('ëª¨ë“œ ì˜¤ë¥˜', false);
                return;
            }
            
            try {
                // ì •ë‹µ ë¹„êµ
                const isCorrect = window.selectedAnswer === window.currentQuestion.ANSWER;
                console.log(`ì„ íƒí•œ ë‹µì•ˆ: ${window.selectedAnswer}, ì •ë‹µ: ${window.currentQuestion.ANSWER}, ì •ë‹µì—¬ë¶€: ${isCorrect}`);
                
                // ì •ë‹µ í™•ì¸ ìƒíƒœ ì €ì¥
                window.isAnswerChecked = true;
                
                // ê²°ê³¼ ë©”ì‹œì§€ ìƒì„±
                const resultMessage = isCorrect ? 
                    'ì •ë‹µì…ë‹ˆë‹¤! ğŸ‰' : 
                    `ì˜¤ë‹µì…ë‹ˆë‹¤. ì •ë‹µì€ "${window.currentQuestion.ANSWER}"ì…ë‹ˆë‹¤.`;
                
                // ê²°ê³¼ ì˜ì—­ í‘œì‹œ
                const resultArea = document.getElementById(config.resultArea);
                const resultMessageElement = document.getElementById(config.resultMessage);
                
                resultArea.classList.remove('hidden');
                resultMessageElement.textContent = resultMessage;
                resultMessageElement.className = `p-3 rounded font-medium ${isCorrect ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`;
                
                // ë‹µì•ˆ ë²„íŠ¼ ìƒ‰ìƒ ì—…ë°ì´íŠ¸
                updateAnswerButtonColors(mode, isCorrect);
                
                // í†µê³„ ì—…ë°ì´íŠ¸ (ê°„ë‹¨í•œ ë²„ì „)
                updateStatistics(isCorrect);
                
                console.log('ì •ë‹µ í™•ì¸ ì™„ë£Œ');
                updateCheckTest(`ì •ë‹µ í™•ì¸ ì™„ë£Œ (${isCorrect ? 'ì •ë‹µ' : 'ì˜¤ë‹µ'})`, true);
                
            } catch (error) {
                console.error('ì •ë‹µ í™•ì¸ ì¤‘ ì˜¤ë¥˜:', error);
                updateCheckTest('í™•ì¸ ì˜¤ë¥˜', false);
            }
        }
        
        // ë‹µì•ˆ ë²„íŠ¼ ìƒ‰ìƒ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
        function updateAnswerButtonColors(mode, isCorrect) {
            const buttons = document.querySelectorAll('.answer-btn');
            const correctAnswer = window.currentQuestion.ANSWER;
            const selectedAnswer = window.selectedAnswer;
            
            buttons.forEach(button => {
                const answer = button.getAttribute('data-answer');
                
                if (answer === correctAnswer) {
                    // ì •ë‹µ ë²„íŠ¼ì€ í•­ìƒ ì´ˆë¡ìƒ‰
                    button.classList.remove('bg-blue-500', 'bg-red-500', 'bg-gray-500', 'bg-yellow-500');
                    button.classList.add('bg-green-500');
                } else if (answer === selectedAnswer && !isCorrect) {
                    // ì„ íƒí–ˆì§€ë§Œ í‹€ë¦° ë‹µì•ˆì€ ë¹¨ê°„ìƒ‰
                    button.classList.remove('bg-blue-500', 'bg-red-500', 'bg-gray-500', 'bg-yellow-500');
                    button.classList.add('bg-red-500');
                }
            });
        }
        
        // í†µê³„ ì—…ë°ì´íŠ¸ í•¨ìˆ˜ (ê°„ë‹¨í•œ ë²„ì „)
        function updateStatistics(isCorrect) {
            if (!window.statistics) {
                window.statistics = {
                    total: 0,
                    correct: 0,
                    incorrect: 0
                };
            }
            
            window.statistics.total++;
            if (isCorrect) {
                window.statistics.correct++;
            } else {
                window.statistics.incorrect++;
            }
            
            console.log('í†µê³„ ì—…ë°ì´íŠ¸:', window.statistics);
            
            // ì •ë‹µë¥  í‘œì‹œ ì—…ë°ì´íŠ¸
            updateAccuracyDisplay();
        }
        
        // ì •ë‹µ í™•ì¸ í…ŒìŠ¤íŠ¸ í•¨ìˆ˜
        function testCheckAnswer() {
            console.log('=== ì •ë‹µ í™•ì¸ í…ŒìŠ¤íŠ¸ ì‹œì‘ ===');
            
            // ë¨¼ì € ë¬¸ì œ í‘œì‹œ ë° ë‹µì•ˆ ì„ íƒ
            if (!window.currentQuestion) {
                testDisplayQuestion();
                setTimeout(() => {
                    selectAnswer('O', 'large-category');
                    setTimeout(() => {
                        checkAnswer('large-category');
                    }, 500);
                }, 500);
            } else if (!window.selectedAnswer) {
                selectAnswer('O', 'large-category');
                setTimeout(() => {
                    checkAnswer('large-category');
                }, 500);
            } else {
                checkAnswer('large-category');
            }
        }
        
        // ì •ë‹µ í™•ì¸ í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì—…ë°ì´íŠ¸
        function updateCheckTest(message, success) {
            const testElement = document.getElementById('check-test');
            if (success) {
                testElement.textContent = `ì •ë‹µ í™•ì¸: âœ… ${message}`;
                testElement.classList.add('text-green-600');
            } else {
                testElement.textContent = `ì •ë‹µ í™•ì¸: âŒ ${message}`;
                testElement.classList.add('text-red-600');
            }
        }

        // ëª¨ë“ˆ 2.4: ë‹¤ìŒ ë¬¸ì œ í•¨ìˆ˜
        function nextQuestion(mode) {
            console.log(`=== ë‹¤ìŒ ë¬¸ì œ í•¨ìˆ˜ ì‹¤í–‰ (ëª¨ë“œ: ${mode}) ===`);
            
            // í˜„ì¬ ì¹´í…Œê³ ë¦¬ ë°ì´í„° í™•ì¸
            if (!window.currentCategoryData || !window.currentCategoryData.data) {
                console.error('ë¡œë“œëœ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.');
                updateNextTest('ë°ì´í„° ì—†ìŒ', false);
                return;
            }
            
            const questions = window.currentCategoryData.data;
            const currentIndex = window.currentQuestionIndex || 0;
            
            // ë§ˆì§€ë§‰ ë¬¸ì œ í™•ì¸
            if (currentIndex >= questions.length - 1) {
                alert('ë§ˆì§€ë§‰ ë¬¸ì œì…ë‹ˆë‹¤.');
                updateNextTest('ë§ˆì§€ë§‰ ë¬¸ì œ', false);
                return;
            }
            
            // ëª¨ë“œë³„ ì„¤ì • ê°€ì ¸ì˜¤ê¸°
            const config = MODE_CONFIG[mode];
            if (!config) {
                console.error(`ì•Œ ìˆ˜ ì—†ëŠ” ëª¨ë“œ: ${mode}`);
                updateNextTest('ëª¨ë“œ ì˜¤ë¥˜', false);
                return;
            }
            
            try {
                // ë‹¤ìŒ ë¬¸ì œ ì¸ë±ìŠ¤ ê³„ì‚°
                const nextIndex = currentIndex + 1;
                console.log(`í˜„ì¬ ë¬¸ì œ: ${currentIndex + 1}, ë‹¤ìŒ ë¬¸ì œ: ${nextIndex + 1}`);
                
                // ë‹¤ìŒ ë¬¸ì œ í‘œì‹œ
                displayQuestion(mode, nextIndex);
                
                // ì„ íƒëœ ë‹µì•ˆ ì´ˆê¸°í™”
                window.selectedAnswer = null;
                window.isAnswerChecked = false;
                
                // ê²°ê³¼ ì˜ì—­ ìˆ¨ê¸°ê¸°
                const resultArea = document.getElementById(config.resultArea);
                resultArea.classList.add('hidden');
                
                console.log('ë‹¤ìŒ ë¬¸ì œë¡œ ì´ë™ ì™„ë£Œ');
                updateNextTest(`ë‹¤ìŒ ë¬¸ì œë¡œ ì´ë™ (${nextIndex + 1}/${questions.length})`, true);
                
            } catch (error) {
                console.error('ë‹¤ìŒ ë¬¸ì œ ì´ë™ ì¤‘ ì˜¤ë¥˜:', error);
                updateNextTest('ì´ë™ ì˜¤ë¥˜', false);
            }
        }
        
        // ì´ì „ ë¬¸ì œ í•¨ìˆ˜
        function prevQuestion(mode) {
            console.log(`=== ì´ì „ ë¬¸ì œ í•¨ìˆ˜ ì‹¤í–‰ (ëª¨ë“œ: ${mode}) ===`);
            
            // í˜„ì¬ ì¹´í…Œê³ ë¦¬ ë°ì´í„° í™•ì¸
            if (!window.currentCategoryData || !window.currentCategoryData.data) {
                console.error('ë¡œë“œëœ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.');
                updateNextTest('ë°ì´í„° ì—†ìŒ', false);
                return;
            }
            
            const questions = window.currentCategoryData.data;
            const currentIndex = window.currentQuestionIndex || 0;
            
            // ì²« ë²ˆì§¸ ë¬¸ì œ í™•ì¸
            if (currentIndex <= 0) {
                alert('ì²« ë²ˆì§¸ ë¬¸ì œì…ë‹ˆë‹¤.');
                updateNextTest('ì²« ë²ˆì§¸ ë¬¸ì œ', false);
                return;
            }
            
            // ëª¨ë“œë³„ ì„¤ì • ê°€ì ¸ì˜¤ê¸°
            const config = MODE_CONFIG[mode];
            if (!config) {
                console.error(`ì•Œ ìˆ˜ ì—†ëŠ” ëª¨ë“œ: ${mode}`);
                updateNextTest('ëª¨ë“œ ì˜¤ë¥˜', false);
                return;
            }
            
            try {
                // ì´ì „ ë¬¸ì œ ì¸ë±ìŠ¤ ê³„ì‚°
                const prevIndex = currentIndex - 1;
                console.log(`í˜„ì¬ ë¬¸ì œ: ${currentIndex + 1}, ì´ì „ ë¬¸ì œ: ${prevIndex + 1}`);
                
                // ì´ì „ ë¬¸ì œ í‘œì‹œ
                displayQuestion(mode, prevIndex);
                
                // ì„ íƒëœ ë‹µì•ˆ ì´ˆê¸°í™”
                window.selectedAnswer = null;
                window.isAnswerChecked = false;
                
                // ê²°ê³¼ ì˜ì—­ ìˆ¨ê¸°ê¸°
                const resultArea = document.getElementById(config.resultArea);
                resultArea.classList.add('hidden');
                
                console.log('ì´ì „ ë¬¸ì œë¡œ ì´ë™ ì™„ë£Œ');
                updateNextTest(`ì´ì „ ë¬¸ì œë¡œ ì´ë™ (${prevIndex + 1}/${questions.length})`, true);
                
            } catch (error) {
                console.error('ì´ì „ ë¬¸ì œ ì´ë™ ì¤‘ ì˜¤ë¥˜:', error);
                updateNextTest('ì´ë™ ì˜¤ë¥˜', false);
            }
        }
        
        // ë‹¤ìŒ ë¬¸ì œ í…ŒìŠ¤íŠ¸ í•¨ìˆ˜
        function testNextQuestion() {
            console.log('=== ë‹¤ìŒ ë¬¸ì œ í…ŒìŠ¤íŠ¸ ì‹œì‘ ===');
            
            // ë”ë¯¸ ë°ì´í„°ë¡œ ì—¬ëŸ¬ ë¬¸ì œ ìƒì„±
            if (!window.currentCategoryData) {
                window.currentCategoryData = {
                    category: 'ì¬ì‚°ë³´í—˜',
                    data: [
                        {
                            QCODE: 'Q001',
                            QUESTION: 'ì¬ì‚°ë³´í—˜ì˜ ê¸°ë³¸ ì›ë¦¬ëŠ” ëŒ€ì¸ë°°ìƒê³¼ ëŒ€ë¬¼ë°°ìƒì˜ ë¶„ë¦¬ ì›ì¹™ì´ë‹¤.',
                            ANSWER: 'O',
                            TYPE: 'ì§„ìœ„í˜•',
                            LAYER1: 'ì¬ì‚°ë³´í—˜',
                            LAYER2: 'ì¼ë°˜ì¬ì‚°ë³´í—˜'
                        },
                        {
                            QCODE: 'Q002',
                            QUESTION: 'ì¬ì‚°ë³´í—˜ì—ì„œ ë³´í—˜ì‚¬ê³ ê°€ ë°œìƒí•˜ë©´ ë³´í—˜ê¸ˆì„ ì§€ê¸‰í•œë‹¤.',
                            ANSWER: 'O',
                            TYPE: 'ì§„ìœ„í˜•',
                            LAYER1: 'ì¬ì‚°ë³´í—˜',
                            LAYER2: 'ì¼ë°˜ì¬ì‚°ë³´í—˜'
                        },
                        {
                            QCODE: 'Q003',
                            QUESTION: 'ì¬ì‚°ë³´í—˜ì˜ ë³´í—˜ë£ŒëŠ” ìœ„í—˜ë„ì— ë”°ë¼ ê²°ì •ëœë‹¤.',
                            ANSWER: 'O',
                            TYPE: 'ì§„ìœ„í˜•',
                            LAYER1: 'ì¬ì‚°ë³´í—˜',
                            LAYER2: 'ì¼ë°˜ì¬ì‚°ë³´í—˜'
                        }
                    ],
                    filename: 'ins_1db.csv',
                    totalCount: 3
                };
            }
            
            // ì²« ë²ˆì§¸ ë¬¸ì œ í‘œì‹œ í›„ ë‹¤ìŒ ë¬¸ì œë¡œ ì´ë™
            displayQuestion('large-category', 0);
            setTimeout(() => {
                nextQuestion('large-category');
            }, 1000);
        }
        
        // ë‹¤ìŒ ë¬¸ì œ í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì—…ë°ì´íŠ¸
        function updateNextTest(message, success) {
            const testElement = document.getElementById('next-test');
            if (success) {
                testElement.textContent = `ë‹¤ìŒ ë¬¸ì œ: âœ… ${message}`;
                testElement.classList.add('text-green-600');
            } else {
                testElement.textContent = `ë‹¤ìŒ ë¬¸ì œ: âŒ ${message}`;
                testElement.classList.add('text-red-600');
            }
        }

        // ëª¨ë“ˆ 3.1: í•™ìŠµ ëª¨ë“œ ì„ íƒ í•¨ìˆ˜
        function selectLearningMode(mode) {
            console.log(`=== í•™ìŠµ ëª¨ë“œ ì„ íƒ: ${mode} ===`);
            
            // í™ˆ í™”ë©´ ìˆ¨ê¸°ê¸°
            document.getElementById('home-screen').classList.add('hidden');
            
            // ëª¨ë“œë³„ í™”ë©´ í‘œì‹œ
            if (mode === 'basic') {
                showBasicLearningScreen();
            } else if (mode === 'large-category') {
                showLargeCategoryScreen();
            }
            
            // ìƒíƒœ ì—…ë°ì´íŠ¸
            document.getElementById('status').textContent = `${mode === 'basic' ? 'ê¸°ë³¸í•™ìŠµ' : 'ëŒ€ë¶„ë¥˜í•™ìŠµ'} ëª¨ë“œ ì„ íƒë¨`;
            document.getElementById('status').className = 'text-center text-green-600 mb-4 font-semibold';
        }
        
        // ëª¨ë“ˆ 3.2: ê¸°ë³¸í•™ìŠµ ëª¨ë“œ ì„ íƒ í•¨ìˆ˜
        function selectBasicLearningMode(mode) {
            console.log(`=== ê¸°ë³¸í•™ìŠµ ëª¨ë“œ ì„ íƒ: ${mode} ===`);
            
            // ê¸°ë³¸í•™ìŠµ í™”ë©´ í‘œì‹œ
            document.getElementById('basic-learning-screen').classList.remove('hidden');
            
            // ë¬¸ì œ í‘œì‹œ ì˜ì—­ í‘œì‹œ
            document.getElementById('basic-question-area').classList.remove('hidden');
            
            // ëª¨ë“œë³„ ë°ì´í„° ë¡œë“œ
            loadBasicLearningData(mode);
            
            // ìƒíƒœ ì—…ë°ì´íŠ¸
            document.getElementById('status').textContent = `ê¸°ë³¸í•™ìŠµ - ${mode === 'continue' ? 'ì´ì–´í’€ê¸°' : mode === 'restart' ? 'ì²˜ìŒí’€ê¸°' : 'ëœë¤í’€ê¸°'}`;
            document.getElementById('status').className = 'text-center text-blue-600 mb-4 font-semibold';
        }
        
        // ê¸°ë³¸í•™ìŠµ ë°ì´í„° ë¡œë“œ í•¨ìˆ˜
        function loadBasicLearningData(mode) {
            console.log(`ê¸°ë³¸í•™ìŠµ ë°ì´í„° ë¡œë“œ: ${mode}`);
            
            // ë”ë¯¸ ë°ì´í„°ë¡œ í…ŒìŠ¤íŠ¸ (ì‹¤ì œë¡œëŠ” ì „ì²´ DBì—ì„œ ë¡œë“œ)
            const dummyData = [
                {
                    QCODE: 'Q001',
                    QUESTION: 'ì¬ì‚°ë³´í—˜ì˜ ê¸°ë³¸ ì›ë¦¬ëŠ” ëŒ€ì¸ë°°ìƒê³¼ ëŒ€ë¬¼ë°°ìƒì˜ ë¶„ë¦¬ ì›ì¹™ì´ë‹¤.',
                    ANSWER: 'O',
                    TYPE: 'ì§„ìœ„í˜•',
                    LAYER1: 'ì¬ì‚°ë³´í—˜',
                    LAYER2: 'ì¼ë°˜ì¬ì‚°ë³´í—˜'
                },
                {
                    QCODE: 'Q002',
                    QUESTION: 'ì¬ì‚°ë³´í—˜ì—ì„œ ë³´í—˜ì‚¬ê³ ê°€ ë°œìƒí•˜ë©´ ë³´í—˜ê¸ˆì„ ì§€ê¸‰í•œë‹¤.',
                    ANSWER: 'O',
                    TYPE: 'ì§„ìœ„í˜•',
                    LAYER1: 'ì¬ì‚°ë³´í—˜',
                    LAYER2: 'ì¼ë°˜ì¬ì‚°ë³´í—˜'
                },
                {
                    QCODE: 'Q003',
                    QUESTION: 'ì¬ì‚°ë³´í—˜ì˜ ë³´í—˜ë£ŒëŠ” ìœ„í—˜ë„ì— ë”°ë¼ ê²°ì •ëœë‹¤.',
                    ANSWER: 'O',
                    TYPE: 'ì§„ìœ„í˜•',
                    LAYER1: 'ì¬ì‚°ë³´í—˜',
                    LAYER2: 'ì¼ë°˜ì¬ì‚°ë³´í—˜'
                }
            ];
            
            // ëª¨ë“œë³„ ë°ì´í„° ì²˜ë¦¬
            let processedData = [...dummyData];
            
            if (mode === 'random') {
                // ëœë¤ ìˆœì„œë¡œ ì„ê¸°
                processedData = processedData.sort(() => Math.random() - 0.5);
            }
            
            // ì „ì—­ ë³€ìˆ˜ì— ì €ì¥
            window.currentCategoryData = {
                category: 'ê¸°ë³¸í•™ìŠµ',
                data: processedData,
                filename: 'basic_learning.csv',
                totalCount: processedData.length,
                mode: mode
            };
            
            // ì²« ë²ˆì§¸ ë¬¸ì œ í‘œì‹œ
            displayQuestion('basic', 0);
            
            // í†µê³„ ì´ˆê¸°í™”
            updateBasicStatistics();
        }
        
        // ê¸°ë³¸í•™ìŠµ í†µê³„ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
        function updateBasicStatistics() {
            if (!window.statistics) {
                window.statistics = {
                    total: 0,
                    correct: 0,
                    incorrect: 0
                };
            }
            
            document.getElementById('total-questions').textContent = window.statistics.total;
            document.getElementById('correct-answers').textContent = window.statistics.correct;
            document.getElementById('incorrect-answers').textContent = window.statistics.incorrect;
        }

        // ëª¨ë“ˆ 3.3: ëŒ€ë¶„ë¥˜í•™ìŠµ ì¹´í…Œê³ ë¦¬ ì„ íƒ í•¨ìˆ˜
        function selectLargeCategory(category) {
            console.log(`=== ëŒ€ë¶„ë¥˜í•™ìŠµ ì¹´í…Œê³ ë¦¬ ì„ íƒ: ${category} ===`);
            
            // ëŒ€ë¶„ë¥˜í•™ìŠµ í™”ë©´ í‘œì‹œ
            document.getElementById('large-category-screen').classList.remove('hidden');
            
            // ë¬¸ì œ í‘œì‹œ ì˜ì—­ í‘œì‹œ
            document.getElementById('large-category-question-area').classList.remove('hidden');
            
            // ì¹´í…Œê³ ë¦¬ë³„ ë°ì´í„° ë¡œë“œ
            loadCategoryData(category);
            
            // ìƒíƒœ ì—…ë°ì´íŠ¸
            document.getElementById('status').textContent = `ëŒ€ë¶„ë¥˜í•™ìŠµ - ${category}`;
            document.getElementById('status').className = 'text-center text-green-600 mb-4 font-semibold';
        }
        
        // ëŒ€ë¶„ë¥˜í•™ìŠµ í†µê³„ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
        function updateLargeCategoryStatistics() {
            if (!window.statistics) {
                window.statistics = {
                    total: 0,
                    correct: 0,
                    incorrect: 0
                };
            }
            
            document.getElementById('large-total-questions').textContent = window.statistics.total;
            document.getElementById('large-correct-answers').textContent = window.statistics.correct;
            document.getElementById('large-incorrect-answers').textContent = window.statistics.incorrect;
        }

        // ëŒ€ë¶„ë¥˜í•™ìŠµ í™”ë©´ í‘œì‹œ í•¨ìˆ˜
        function showLargeCategoryScreen() {
            console.log('ëŒ€ë¶„ë¥˜í•™ìŠµ í™”ë©´ í‘œì‹œ');
            
            // í™ˆ í™”ë©´ ìˆ¨ê¸°ê¸°
            document.getElementById('home-screen').classList.add('hidden');
            
            // ëŒ€ë¶„ë¥˜í•™ìŠµ í™”ë©´ í‘œì‹œ
            document.getElementById('large-category-screen').classList.remove('hidden');
            
            // ìƒíƒœ ì—…ë°ì´íŠ¸
            document.getElementById('status').textContent = 'ëŒ€ë¶„ë¥˜í•™ìŠµ ëª¨ë“œ';
            document.getElementById('status').className = 'text-center text-green-600 mb-4 font-semibold';
        }
        
        // ê¸°ë³¸í•™ìŠµ í™”ë©´ í‘œì‹œ í•¨ìˆ˜
        function showBasicLearningScreen() {
            console.log('ê¸°ë³¸í•™ìŠµ í™”ë©´ í‘œì‹œ');
            
            // í™ˆ í™”ë©´ ìˆ¨ê¸°ê¸°
            document.getElementById('home-screen').classList.add('hidden');
            
            // ê¸°ë³¸í•™ìŠµ í™”ë©´ í‘œì‹œ
            document.getElementById('basic-learning-screen').classList.remove('hidden');
            
            // ìƒíƒœ ì—…ë°ì´íŠ¸
            document.getElementById('status').textContent = 'ê¸°ë³¸í•™ìŠµ ëª¨ë“œ';
            document.getElementById('status').className = 'text-center text-blue-600 mb-4 font-semibold';
        }

        // í™ˆ í™”ë©´ìœ¼ë¡œ ëŒì•„ê°€ê¸° í•¨ìˆ˜
        function goHome() {
            console.log('í™ˆ í™”ë©´ìœ¼ë¡œ ëŒì•„ê°€ê¸°');
            
            // ëª¨ë“  í™”ë©´ ìˆ¨ê¸°ê¸°
            const screens = ['home-screen', 'basic-learning-screen', 'large-category-screen'];
            screens.forEach(screenId => {
                const screen = document.getElementById(screenId);
                if (screen) {
                    screen.classList.add('hidden');
                }
            });
            
            // í™ˆ í™”ë©´ í‘œì‹œ
            document.getElementById('home-screen').classList.remove('hidden');
            
            // ìƒíƒœ ì´ˆê¸°í™”
            document.getElementById('status').textContent = 'í™ˆ í™”ë©´';
            document.getElementById('status').className = 'text-center text-gray-600 mb-4';
        }

        // ëª¨ë“ˆ 4.1: ì§„ë„ ê´€ë¦¬ í•¨ìˆ˜
        function updateProgress() {
            console.log('=== ì§„ë„ ê´€ë¦¬ ì—…ë°ì´íŠ¸ ===');
            
            if (!window.currentCategoryData || !window.currentCategoryData.data) {
                console.log('ì§„ë„ ì—…ë°ì´íŠ¸: ë°ì´í„° ì—†ìŒ');
                return;
            }
            
            const totalQuestions = window.currentCategoryData.data.length;
            const currentIndex = window.currentQuestionIndex || 0;
            const completedQuestions = currentIndex + 1;
            const progressPercentage = Math.round((completedQuestions / totalQuestions) * 100);
            
            console.log(`ì§„ë„: ${completedQuestions}/${totalQuestions} (${progressPercentage}%)`);
            
            // ì§„ë„ í‘œì‹œ ì—…ë°ì´íŠ¸
            updateProgressDisplay(completedQuestions, totalQuestions, progressPercentage);
            
            // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì§„ë„ ì €ì¥
            saveProgressToStorage();
        }
        
        // ì§„ë„ í‘œì‹œ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
        function updateProgressDisplay(completed, total, percentage) {
            // ê¸°ë³¸í•™ìŠµ ì§„ë„ í‘œì‹œ
            const basicProgressElement = document.getElementById('basic-progress');
            if (basicProgressElement) {
                basicProgressElement.innerHTML = `
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-sm font-medium">ì§„ë„</span>
                        <span class="text-sm text-gray-600">${completed}/${total}</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2">
                        <div class="bg-blue-600 h-2 rounded-full" style="width: ${percentage}%"></div>
                    </div>
                    <div class="text-xs text-gray-500 mt-1">${percentage}% ì™„ë£Œ</div>
                `;
            }
            
            // ëŒ€ë¶„ë¥˜í•™ìŠµ ì§„ë„ í‘œì‹œ
            const largeProgressElement = document.getElementById('large-progress');
            if (largeProgressElement) {
                largeProgressElement.innerHTML = `
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-sm font-medium">ì§„ë„</span>
                        <span class="text-sm text-gray-600">${completed}/${total}</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2">
                        <div class="bg-green-600 h-2 rounded-full" style="width: ${percentage}%"></div>
                    </div>
                    <div class="text-xs text-gray-500 mt-1">${percentage}% ì™„ë£Œ</div>
                `;
            }
        }
        
        // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì§„ë„ ì €ì¥
        function saveProgressToStorage() {
            if (!window.currentCategoryData) return;
            
            const progressData = {
                category: window.currentCategoryData.category,
                currentIndex: window.currentQuestionIndex || 0,
                totalQuestions: window.currentCategoryData.data.length,
                timestamp: new Date().toISOString(),
                mode: window.currentCategoryData.mode || 'unknown'
            };
            
            try {
                localStorage.setItem('aicu_progress', JSON.stringify(progressData));
                console.log('ì§„ë„ ì €ì¥ ì™„ë£Œ:', progressData);
            } catch (error) {
                console.error('ì§„ë„ ì €ì¥ ì‹¤íŒ¨:', error);
            }
        }
        
        // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ì§„ë„ ë¡œë“œ
        function loadProgressFromStorage() {
            try {
                const savedProgress = localStorage.getItem('aicu_progress');
                if (savedProgress) {
                    const progressData = JSON.parse(savedProgress);
                    console.log('ì €ì¥ëœ ì§„ë„ ë¡œë“œ:', progressData);
                    return progressData;
                }
            } catch (error) {
                console.error('ì§„ë„ ë¡œë“œ ì‹¤íŒ¨:', error);
            }
            return null;
        }
        
        // ì§„ë„ í…ŒìŠ¤íŠ¸ í•¨ìˆ˜
        function testProgress() {
            console.log('=== ì§„ë„ ê´€ë¦¬ í…ŒìŠ¤íŠ¸ ===');
            
            // ë”ë¯¸ ë°ì´í„°ë¡œ í…ŒìŠ¤íŠ¸
            if (!window.currentCategoryData) {
                window.currentCategoryData = {
                    category: 'í…ŒìŠ¤íŠ¸',
                    data: [
                        { QCODE: 'Q001', QUESTION: 'í…ŒìŠ¤íŠ¸ ë¬¸ì œ 1', ANSWER: 'O' },
                        { QCODE: 'Q002', QUESTION: 'í…ŒìŠ¤íŠ¸ ë¬¸ì œ 2', ANSWER: 'X' },
                        { QCODE: 'Q003', QUESTION: 'í…ŒìŠ¤íŠ¸ ë¬¸ì œ 3', ANSWER: 'O' }
                    ],
                    totalCount: 3
                };
            }
            
            // ì§„ë„ ì—…ë°ì´íŠ¸ í…ŒìŠ¤íŠ¸
            window.currentQuestionIndex = 1; // ë‘ ë²ˆì§¸ ë¬¸ì œ
            updateProgress();
            
            console.log('ì§„ë„ ê´€ë¦¬ í…ŒìŠ¤íŠ¸ ì™„ë£Œ');
        }

        // ëª¨ë“ˆ 4.2: ì •ë‹µë¥  ê³„ì‚° í•¨ìˆ˜
        function calculateAccuracy() {
            console.log('=== ì •ë‹µë¥  ê³„ì‚° ===');
            
            if (!window.statistics) {
                console.log('í†µê³„ ë°ì´í„° ì—†ìŒ');
                return 0;
            }
            
            const { total, correct } = window.statistics;
            if (total === 0) {
                console.log('ì´ ë¬¸ì œ ìˆ˜ê°€ 0');
                return 0;
            }
            
            const accuracy = Math.round((correct / total) * 100);
            console.log(`ì •ë‹µë¥ : ${correct}/${total} = ${accuracy}%`);
            
            return accuracy;
        }
        
        // ì •ë‹µë¥  í‘œì‹œ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
        function updateAccuracyDisplay() {
            const accuracy = calculateAccuracy();
            
            // ê¸°ë³¸í•™ìŠµ ì •ë‹µë¥  í‘œì‹œ
            const basicAccuracyElement = document.getElementById('basic-accuracy');
            if (basicAccuracyElement) {
                basicAccuracyElement.innerHTML = `
                    <div class="text-center">
                        <div class="text-2xl font-bold text-blue-600">${accuracy}%</div>
                        <div class="text-sm text-gray-600">ì •ë‹µë¥ </div>
                    </div>
                `;
            }
            
            // ëŒ€ë¶„ë¥˜í•™ìŠµ ì •ë‹µë¥  í‘œì‹œ
            const largeAccuracyElement = document.getElementById('large-accuracy');
            if (largeAccuracyElement) {
                largeAccuracyElement.innerHTML = `
                    <div class="text-center">
                        <div class="text-2xl font-bold text-green-600">${accuracy}%</div>
                        <div class="text-sm text-gray-600">ì •ë‹µë¥ </div>
                    </div>
                `;
            }
            
            // ìƒì„¸ í†µê³„ í‘œì‹œ
            updateDetailedStatistics();
        }
        
        // ìƒì„¸ í†µê³„ í‘œì‹œ í•¨ìˆ˜
        function updateDetailedStatistics() {
            if (!window.statistics) return;
            
            const { total, correct, incorrect } = window.statistics;
            
            // ê¸°ë³¸í•™ìŠµ ìƒì„¸ í†µê³„
            const basicStatsElement = document.getElementById('basic-detailed-stats');
            if (basicStatsElement) {
                basicStatsElement.innerHTML = `
                    <div class="grid grid-cols-3 gap-4 text-center">
                        <div>
                            <div class="text-xl font-bold text-blue-600">${total}</div>
                            <div class="text-xs text-gray-600">ì´ ë¬¸ì œ</div>
                        </div>
                        <div>
                            <div class="text-xl font-bold text-green-600">${correct}</div>
                            <div class="text-xs text-gray-600">ì •ë‹µ</div>
                        </div>
                        <div>
                            <div class="text-xl font-bold text-red-600">${incorrect}</div>
                            <div class="text-xs text-gray-600">ì˜¤ë‹µ</div>
                        </div>
                    </div>
                `;
            }
            
            // ëŒ€ë¶„ë¥˜í•™ìŠµ ìƒì„¸ í†µê³„
            const largeStatsElement = document.getElementById('large-detailed-stats');
            if (largeStatsElement) {
                largeStatsElement.innerHTML = `
                    <div class="grid grid-cols-3 gap-4 text-center">
                        <div>
                            <div class="text-xl font-bold text-green-600">${total}</div>
                            <div class="text-xs text-gray-600">ì´ ë¬¸ì œ</div>
                        </div>
                        <div>
                            <div class="text-xl font-bold text-green-600">${correct}</div>
                            <div class="text-xs text-gray-600">ì •ë‹µ</div>
                        </div>
                        <div>
                            <div class="text-xl font-bold text-red-600">${incorrect}</div>
                            <div class="text-xs text-gray-600">ì˜¤ë‹µ</div>
                        </div>
                    </div>
                `;
            }
        }
        
        // ì •ë‹µë¥  í…ŒìŠ¤íŠ¸ í•¨ìˆ˜
        function testAccuracy() {
            console.log('=== ì •ë‹µë¥  ê³„ì‚° í…ŒìŠ¤íŠ¸ ===');
            
            // í…ŒìŠ¤íŠ¸ í†µê³„ ì„¤ì •
            window.statistics = {
                total: 10,
                correct: 7,
                incorrect: 3
            };
            
            // ì •ë‹µë¥  ê³„ì‚° ë° í‘œì‹œ
            const accuracy = calculateAccuracy();
            updateAccuracyDisplay();
            
            console.log(`í…ŒìŠ¤íŠ¸ ì •ë‹µë¥ : ${accuracy}%`);
            console.log('ì •ë‹µë¥  ê³„ì‚° í…ŒìŠ¤íŠ¸ ì™„ë£Œ');
        }

        // ëª¨ë“ˆ 4.3: ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ í•¨ìˆ˜
        function saveProgress() {
            console.log('=== ì§„í–‰ìƒí™© ì €ì¥ ===');
            
            const saveData = {
                // í˜„ì¬ ì¹´í…Œê³ ë¦¬ ì •ë³´
                category: window.currentCategoryData?.category || '',
                currentIndex: window.currentQuestionIndex || 0,
                totalQuestions: window.currentCategoryData?.data?.length || 0,
                
                // í†µê³„ ì •ë³´
                statistics: window.statistics || {
                    total: 0,
                    correct: 0,
                    incorrect: 0
                },
                
                // ì„ íƒëœ ë‹µì•ˆ
                selectedAnswer: window.selectedAnswer || null,
                
                // í˜„ì¬ ë¬¸ì œ ì •ë³´
                currentQuestion: window.currentQuestion || null,
                
                // ëª¨ë“œ ì •ë³´
                mode: window.currentMode || '',
                
                // ì €ì¥ ì‹œê°„
                timestamp: new Date().toISOString()
            };
            
            try {
                localStorage.setItem('aicu_save_data', JSON.stringify(saveData));
                console.log('ì§„í–‰ìƒí™© ì €ì¥ ì™„ë£Œ:', saveData);
                return true;
            } catch (error) {
                console.error('ì§„í–‰ìƒí™© ì €ì¥ ì‹¤íŒ¨:', error);
                return false;
            }
        }
        
        // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ì§„í–‰ìƒí™© ë¡œë“œ
        function loadProgress() {
            console.log('=== ì§„í–‰ìƒí™© ë¡œë“œ ===');
            
            try {
                const savedData = localStorage.getItem('aicu_save_data');
                if (!savedData) {
                    console.log('ì €ì¥ëœ ì§„í–‰ìƒí™© ì—†ìŒ');
                    return false;
                }
                
                const data = JSON.parse(savedData);
                console.log('ì €ì¥ëœ ì§„í–‰ìƒí™© ë¡œë“œ:', data);
                
                // ë°ì´í„° ë³µì›
                if (data.statistics) {
                    window.statistics = data.statistics;
                }
                
                if (data.currentQuestion) {
                    window.currentQuestion = data.currentQuestion;
                }
                
                if (data.selectedAnswer !== null) {
                    window.selectedAnswer = data.selectedAnswer;
                }
                
                if (data.mode) {
                    window.currentMode = data.mode;
                }
                
                // í™”ë©´ ë³µì›
                restoreScreenFromSaveData(data);
                
                console.log('ì§„í–‰ìƒí™© ë³µì› ì™„ë£Œ');
                return true;
                
            } catch (error) {
                console.error('ì§„í–‰ìƒí™© ë¡œë“œ ì‹¤íŒ¨:', error);
                return false;
            }
        }
        
        // ì €ì¥ëœ ë°ì´í„°ë¡œ í™”ë©´ ë³µì›
        function restoreScreenFromSaveData(data) {
            if (!data.category) return;
            
            // ì¹´í…Œê³ ë¦¬ë³„ í™”ë©´ ë³µì›
            if (data.category === 'ê¸°ë³¸í•™ìŠµ') {
                showBasicLearningScreen();
                // ê¸°ë³¸í•™ìŠµ ëª¨ë“œ ì„ íƒ í™”ë©´ ìˆ¨ê¸°ê³  ë¬¸ì œ í‘œì‹œ
                document.getElementById('basic-question-area').classList.remove('hidden');
                
                // ì €ì¥ëœ ì¸ë±ìŠ¤ë¡œ ë¬¸ì œ í‘œì‹œ
                if (data.currentIndex !== undefined) {
                    displayQuestion('basic', data.currentIndex);
                }
                
            } else if (data.category.includes('ë³´í—˜')) {
                showLargeCategoryScreen();
                // ëŒ€ë¶„ë¥˜í•™ìŠµ ë¬¸ì œ í‘œì‹œ ì˜ì—­ í‘œì‹œ
                document.getElementById('large-category-question-area').classList.remove('hidden');
                
                // ì €ì¥ëœ ì¸ë±ìŠ¤ë¡œ ë¬¸ì œ í‘œì‹œ
                if (data.currentIndex !== undefined) {
                    displayQuestion('large-category', data.currentIndex);
                }
            }
            
            // í†µê³„ í‘œì‹œ ì—…ë°ì´íŠ¸
            updateAccuracyDisplay();
            updateProgress();
        }
        
        // ì§„í–‰ìƒí™© ì‚­ì œ
        function clearProgress() {
            console.log('=== ì§„í–‰ìƒí™© ì‚­ì œ ===');
            
            try {
                localStorage.removeItem('aicu_save_data');
                localStorage.removeItem('aicu_progress');
                console.log('ì§„í–‰ìƒí™© ì‚­ì œ ì™„ë£Œ');
                return true;
            } catch (error) {
                console.error('ì§„í–‰ìƒí™© ì‚­ì œ ì‹¤íŒ¨:', error);
                return false;
            }
        }
        
        // ìë™ ì €ì¥ ì„¤ì •
        function setupAutoSave() {
            // í˜ì´ì§€ ì–¸ë¡œë“œ ì‹œ ìë™ ì €ì¥
            window.addEventListener('beforeunload', function() {
                saveProgress();
            });
            
            // 30ì´ˆë§ˆë‹¤ ìë™ ì €ì¥
            setInterval(function() {
                if (window.currentCategoryData) {
                    saveProgress();
                }
            }, 30000);
            
            console.log('ìë™ ì €ì¥ ì„¤ì • ì™„ë£Œ');
        }
        
        // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ í…ŒìŠ¤íŠ¸ í•¨ìˆ˜
        function testLocalStorage() {
            console.log('=== ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ í…ŒìŠ¤íŠ¸ ===');
            
            // í…ŒìŠ¤íŠ¸ ë°ì´í„° ì„¤ì •
            window.currentCategoryData = {
                category: 'í…ŒìŠ¤íŠ¸',
                data: [{ QCODE: 'Q001', QUESTION: 'í…ŒìŠ¤íŠ¸', ANSWER: 'O' }],
                totalCount: 1
            };
            window.currentQuestionIndex = 0;
            window.statistics = { total: 5, correct: 3, incorrect: 2 };
            
            // ì €ì¥ í…ŒìŠ¤íŠ¸
            const saveResult = saveProgress();
            console.log('ì €ì¥ í…ŒìŠ¤íŠ¸ ê²°ê³¼:', saveResult);
            
            // ë¡œë“œ í…ŒìŠ¤íŠ¸
            const loadResult = loadProgress();
            console.log('ë¡œë“œ í…ŒìŠ¤íŠ¸ ê²°ê³¼:', loadResult);
            
            console.log('ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ í…ŒìŠ¤íŠ¸ ì™„ë£Œ');
        }

        // ëª¨ë“ˆ 1.1 í…ŒìŠ¤íŠ¸ í•¨ìˆ˜
        function testModule11() {
            console.log('=== ëª¨ë“ˆ 1.1 í…ŒìŠ¤íŠ¸ ì‹œì‘ ===');
            
            // 1. HTML êµ¬ì¡° í…ŒìŠ¤íŠ¸
            const app = document.getElementById('app');
            const status = document.getElementById('status');
            const homeScreen = document.getElementById('home-screen');
            const devTestArea = document.getElementById('dev-test-area');
            
            if (app && status && homeScreen && devTestArea) {
                document.getElementById('html-test').textContent = 'HTML êµ¬ì¡°: âœ… ì •ìƒ';
                document.getElementById('html-test').classList.add('text-green-600');
            } else {
                document.getElementById('html-test').textContent = 'HTML êµ¬ì¡°: âŒ ì˜¤ë¥˜';
                document.getElementById('html-test').classList.add('text-red-600');
            }
            
            // 2. CSS ìŠ¤íƒ€ì¼ í…ŒìŠ¤íŠ¸
            const testDiv = document.createElement('div');
            testDiv.className = 'bg-blue-500 text-white p-2 rounded';
            testDiv.textContent = 'Tailwind CSS í…ŒìŠ¤íŠ¸';
            document.body.appendChild(testDiv);
            
            setTimeout(() => {
                const computedStyle = window.getComputedStyle(testDiv);
                if (computedStyle.backgroundColor !== 'rgba(0, 0, 0, 0)') {
                    document.getElementById('css-test').textContent = 'CSS ìŠ¤íƒ€ì¼: âœ… ì •ìƒ';
                    document.getElementById('css-test').classList.add('text-green-600');
                } else {
                    document.getElementById('css-test').textContent = 'CSS ìŠ¤íƒ€ì¼: âŒ ì˜¤ë¥˜';
                    document.getElementById('css-test').classList.add('text-red-600');
                }
                document.body.removeChild(testDiv);
            }, 100);
            
            // 3. JavaScript ë¼ì´ë¸ŒëŸ¬ë¦¬ í…ŒìŠ¤íŠ¸
            if (typeof Papa !== 'undefined') {
                document.getElementById('js-test').textContent = 'JavaScript ë¼ì´ë¸ŒëŸ¬ë¦¬: âœ… Papa Parse ì •ìƒ';
                document.getElementById('js-test').classList.add('text-green-600');
            } else {
                document.getElementById('js-test').textContent = 'JavaScript ë¼ì´ë¸ŒëŸ¬ë¦¬: âŒ Papa Parse ì˜¤ë¥˜';
                document.getElementById('js-test').classList.add('text-red-600');
            }
            
            // 4. ìƒíƒœ ì—…ë°ì´íŠ¸
            status.textContent = 'ëª¨ë“ˆ 1.1 í…ŒìŠ¤íŠ¸ ì™„ë£Œ';
            status.className = 'text-center text-green-600 mb-4 font-semibold';
            
            console.log('=== ëª¨ë“ˆ 1.1 í…ŒìŠ¤íŠ¸ ì™„ë£Œ ===');
        }

        // ëª¨ë“ˆ 1.2 í…ŒìŠ¤íŠ¸ í•¨ìˆ˜
        function testModule12() {
            console.log('=== ëª¨ë“ˆ 1.2 í…ŒìŠ¤íŠ¸ ì‹œì‘ ===');
            
            // 1. MODE_CONFIG ê°ì²´ ì¡´ì¬ í™•ì¸
            if (typeof MODE_CONFIG !== 'undefined') {
                document.getElementById('config-test').textContent = 'ì„¤ì • ê°ì²´: âœ… MODE_CONFIG ì •ìƒ';
                document.getElementById('config-test').classList.add('text-green-600');
            } else {
                document.getElementById('config-test').textContent = 'ì„¤ì • ê°ì²´: âŒ MODE_CONFIG ì˜¤ë¥˜';
                document.getElementById('config-test').classList.add('text-red-600');
            }
            
            // 2. ê¸°ë³¸í•™ìŠµ ëª¨ë“œ ì„¤ì • í™•ì¸
            if (MODE_CONFIG.basic && MODE_CONFIG.basic.questionText === 'question-text') {
                document.getElementById('basic-config-test').textContent = 'ê¸°ë³¸í•™ìŠµ ì„¤ì •: âœ… ì •ìƒ';
                document.getElementById('basic-config-test').classList.add('text-green-600');
            } else {
                document.getElementById('basic-config-test').textContent = 'ê¸°ë³¸í•™ìŠµ ì„¤ì •: âŒ ì˜¤ë¥˜';
                document.getElementById('basic-config-test').classList.add('text-red-600');
            }
            
            // 3. ëŒ€ë¶„ë¥˜í•™ìŠµ ëª¨ë“œ ì„¤ì • í™•ì¸
            if (MODE_CONFIG['large-category'] && MODE_CONFIG['large-category'].questionText === 'large-category-question-text') {
                document.getElementById('large-config-test').textContent = 'ëŒ€ë¶„ë¥˜í•™ìŠµ ì„¤ì •: âœ… ì •ìƒ';
                document.getElementById('large-config-test').classList.add('text-green-600');
            } else {
                document.getElementById('large-config-test').textContent = 'ëŒ€ë¶„ë¥˜í•™ìŠµ ì„¤ì •: âŒ ì˜¤ë¥˜';
                document.getElementById('large-config-test').classList.add('text-red-600');
            }
            
            // 4. ì„¤ì • ê°ì²´ ì½˜ì†” ì¶œë ¥
            console.log('MODE_CONFIG ê°ì²´:', MODE_CONFIG);
            console.log('ê¸°ë³¸í•™ìŠµ ì„¤ì •:', MODE_CONFIG.basic);
            console.log('ëŒ€ë¶„ë¥˜í•™ìŠµ ì„¤ì •:', MODE_CONFIG['large-category']);
            
            console.log('=== ëª¨ë“ˆ 1.2 í…ŒìŠ¤íŠ¸ ì™„ë£Œ ===');
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
        document.addEventListener('DOMContentLoaded', function() {
            console.log('í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ - ëª¨ë“ˆ 1.1, 1.2 í…ŒìŠ¤íŠ¸ ì‹œì‘');
            testModule11();
            setTimeout(() => {
                testModule12();
            }, 500);
            
            // ìë™ ì €ì¥ ì„¤ì •
            setupAutoSave();
            
            // ì €ì¥ëœ ì§„í–‰ìƒí™© ë³µì› ì‹œë„
            const hasSavedProgress = loadProgress();
            if (hasSavedProgress) {
                document.getElementById('status').textContent = 'ì €ì¥ëœ ì§„í–‰ìƒí™©ì„ ë³µì›í–ˆìŠµë‹ˆë‹¤.';
                document.getElementById('status').className = 'text-center text-green-600 mb-4 font-semibold';
            }
        });

        // ëª¨ë“ˆ 5.1: ì¢…í•© ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
        function comprehensiveTest() {
            console.log('=== ì¢…í•© ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ ì‹œì‘ ===');
            
            const testResults = {
                basic: { passed: 0, total: 0, details: [] },
                largeCategory: { passed: 0, total: 0, details: [] },
                statistics: { passed: 0, total: 0, details: [] },
                storage: { passed: 0, total: 0, details: [] }
            };
            
            // 1. ê¸°ë³¸í•™ìŠµ ëª¨ë“œ í…ŒìŠ¤íŠ¸
            console.log('--- ê¸°ë³¸í•™ìŠµ ëª¨ë“œ í…ŒìŠ¤íŠ¸ ---');
            testBasicLearningMode(testResults.basic);
            
            // 2. ëŒ€ë¶„ë¥˜í•™ìŠµ ëª¨ë“œ í…ŒìŠ¤íŠ¸
            console.log('--- ëŒ€ë¶„ë¥˜í•™ìŠµ ëª¨ë“œ í…ŒìŠ¤íŠ¸ ---');
            testLargeCategoryMode(testResults.largeCategory);
            
            // 3. í†µê³„ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
            console.log('--- í†µê³„ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ ---');
            testStatisticsFeatures(testResults.statistics);
            
            // 4. ì €ì¥ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
            console.log('--- ì €ì¥ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ ---');
            testStorageFeatures(testResults.storage);
            
            // ê²°ê³¼ ìš”ì•½
            displayTestResults(testResults);
        }
        
        // ê¸°ë³¸í•™ìŠµ ëª¨ë“œ í…ŒìŠ¤íŠ¸
        function testBasicLearningMode(results) {
            try {
                // 1. ê¸°ë³¸í•™ìŠµ í™”ë©´ í‘œì‹œ í…ŒìŠ¤íŠ¸
                showBasicLearningScreen();
                const basicScreen = document.getElementById('basic-learning-screen');
                if (basicScreen && !basicScreen.classList.contains('hidden')) {
                    results.passed++;
                    results.details.push('âœ… ê¸°ë³¸í•™ìŠµ í™”ë©´ í‘œì‹œ');
                } else {
                    results.details.push('âŒ ê¸°ë³¸í•™ìŠµ í™”ë©´ í‘œì‹œ ì‹¤íŒ¨');
                }
                results.total++;
                
                // 2. í•™ìŠµ ë°©ì‹ ì„ íƒ í…ŒìŠ¤íŠ¸
                selectBasicLearningMode('continue');
                if (window.currentCategoryData && window.currentCategoryData.mode === 'continue') {
                    results.passed++;
                    results.details.push('âœ… ì´ì–´í’€ê¸° ëª¨ë“œ ì„ íƒ');
                } else {
                    results.details.push('âŒ ì´ì–´í’€ê¸° ëª¨ë“œ ì„ íƒ ì‹¤íŒ¨');
                }
                results.total++;
                
                // 3. ë¬¸ì œ í‘œì‹œ í…ŒìŠ¤íŠ¸
                const questionArea = document.getElementById('basic-question-area');
                if (questionArea && !questionArea.classList.contains('hidden')) {
                    results.passed++;
                    results.details.push('âœ… ë¬¸ì œ í‘œì‹œ ì˜ì—­');
                } else {
                    results.details.push('âŒ ë¬¸ì œ í‘œì‹œ ì˜ì—­ ì‹¤íŒ¨');
                }
                results.total++;
                
                // 4. ë‹µì•ˆ ì„ íƒ í…ŒìŠ¤íŠ¸
                selectAnswer('O', 'basic');
                if (window.selectedAnswer === 'O') {
                    results.passed++;
                    results.details.push('âœ… ë‹µì•ˆ ì„ íƒ');
                } else {
                    results.details.push('âŒ ë‹µì•ˆ ì„ íƒ ì‹¤íŒ¨');
                }
                results.total++;
                
                // 5. ì •ë‹µ í™•ì¸ í…ŒìŠ¤íŠ¸
                checkAnswer('basic');
                const resultArea = document.getElementById('result-area');
                if (resultArea && !resultArea.classList.contains('hidden')) {
                    results.passed++;
                    results.details.push('âœ… ì •ë‹µ í™•ì¸');
                } else {
                    results.details.push('âŒ ì •ë‹µ í™•ì¸ ì‹¤íŒ¨');
                }
                results.total++;
                
            } catch (error) {
                console.error('ê¸°ë³¸í•™ìŠµ ëª¨ë“œ í…ŒìŠ¤íŠ¸ ì˜¤ë¥˜:', error);
                results.details.push(`âŒ í…ŒìŠ¤íŠ¸ ì˜¤ë¥˜: ${error.message}`);
            }
        }
        
        // ëŒ€ë¶„ë¥˜í•™ìŠµ ëª¨ë“œ í…ŒìŠ¤íŠ¸
        function testLargeCategoryMode(results) {
            try {
                // 1. ëŒ€ë¶„ë¥˜í•™ìŠµ í™”ë©´ í‘œì‹œ í…ŒìŠ¤íŠ¸
                showLargeCategoryScreen();
                const largeScreen = document.getElementById('large-category-screen');
                if (largeScreen && !largeScreen.classList.contains('hidden')) {
                    results.passed++;
                    results.details.push('âœ… ëŒ€ë¶„ë¥˜í•™ìŠµ í™”ë©´ í‘œì‹œ');
                } else {
                    results.details.push('âŒ ëŒ€ë¶„ë¥˜í•™ìŠµ í™”ë©´ í‘œì‹œ ì‹¤íŒ¨');
                }
                results.total++;
                
                // 2. ì¹´í…Œê³ ë¦¬ ì„ íƒ í…ŒìŠ¤íŠ¸
                selectLargeCategory('ì¬ì‚°ë³´í—˜');
                if (window.currentCategoryData && window.currentCategoryData.category === 'ì¬ì‚°ë³´í—˜') {
                    results.passed++;
                    results.details.push('âœ… ì¬ì‚°ë³´í—˜ ì¹´í…Œê³ ë¦¬ ì„ íƒ');
                } else {
                    results.details.push('âŒ ì¬ì‚°ë³´í—˜ ì¹´í…Œê³ ë¦¬ ì„ íƒ ì‹¤íŒ¨');
                }
                results.total++;
                
                // 3. ë¬¸ì œ í‘œì‹œ í…ŒìŠ¤íŠ¸
                const questionArea = document.getElementById('large-category-question-area');
                if (questionArea && !questionArea.classList.contains('hidden')) {
                    results.passed++;
                    results.details.push('âœ… ë¬¸ì œ í‘œì‹œ ì˜ì—­');
                } else {
                    results.details.push('âŒ ë¬¸ì œ í‘œì‹œ ì˜ì—­ ì‹¤íŒ¨');
                }
                results.total++;
                
                // 4. ë‹µì•ˆ ì„ íƒ í…ŒìŠ¤íŠ¸
                selectAnswer('O', 'large-category');
                if (window.selectedAnswer === 'O') {
                    results.passed++;
                    results.details.push('âœ… ë‹µì•ˆ ì„ íƒ');
                } else {
                    results.details.push('âŒ ë‹µì•ˆ ì„ íƒ ì‹¤íŒ¨');
                }
                results.total++;
                
                // 5. ì •ë‹µ í™•ì¸ í…ŒìŠ¤íŠ¸
                checkAnswer('large-category');
                const resultArea = document.getElementById('large-category-result-area');
                if (resultArea && !resultArea.classList.contains('hidden')) {
                    results.passed++;
                    results.details.push('âœ… ì •ë‹µ í™•ì¸');
                } else {
                    results.details.push('âŒ ì •ë‹µ í™•ì¸ ì‹¤íŒ¨');
                }
                results.total++;
                
            } catch (error) {
                console.error('ëŒ€ë¶„ë¥˜í•™ìŠµ ëª¨ë“œ í…ŒìŠ¤íŠ¸ ì˜¤ë¥˜:', error);
                results.details.push(`âŒ í…ŒìŠ¤íŠ¸ ì˜¤ë¥˜: ${error.message}`);
            }
        }
        
        // í†µê³„ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
        function testStatisticsFeatures(results) {
            try {
                // 1. í†µê³„ ì´ˆê¸°í™” í…ŒìŠ¤íŠ¸
                window.statistics = { total: 0, correct: 0, incorrect: 0 };
                if (window.statistics.total === 0) {
                    results.passed++;
                    results.details.push('âœ… í†µê³„ ì´ˆê¸°í™”');
                } else {
                    results.details.push('âŒ í†µê³„ ì´ˆê¸°í™” ì‹¤íŒ¨');
                }
                results.total++;
                
                // 2. ì •ë‹µë¥  ê³„ì‚° í…ŒìŠ¤íŠ¸
                window.statistics = { total: 10, correct: 7, incorrect: 3 };
                const accuracy = calculateAccuracy();
                if (accuracy === 70) {
                    results.passed++;
                    results.details.push('âœ… ì •ë‹µë¥  ê³„ì‚° (70%)');
                } else {
                    results.details.push(`âŒ ì •ë‹µë¥  ê³„ì‚° ì‹¤íŒ¨ (${accuracy}%)`);
                }
                results.total++;
                
                // 3. ì§„ë„ ê³„ì‚° í…ŒìŠ¤íŠ¸
                window.currentCategoryData = {
                    data: [{}, {}, {}, {}, {}] // 5ê°œ ë¬¸ì œ
                };
                window.currentQuestionIndex = 2; // 3ë²ˆì§¸ ë¬¸ì œ
                updateProgress();
                results.passed++;
                results.details.push('âœ… ì§„ë„ ê³„ì‚°');
                results.total++;
                
            } catch (error) {
                console.error('í†µê³„ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ ì˜¤ë¥˜:', error);
                results.details.push(`âŒ í…ŒìŠ¤íŠ¸ ì˜¤ë¥˜: ${error.message}`);
            }
        }
        
        // ì €ì¥ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
        function testStorageFeatures(results) {
            try {
                // 1. ì €ì¥ í…ŒìŠ¤íŠ¸
                window.currentCategoryData = {
                    category: 'í…ŒìŠ¤íŠ¸',
                    data: [{ QCODE: 'Q001', QUESTION: 'í…ŒìŠ¤íŠ¸', ANSWER: 'O' }]
                };
                window.currentQuestionIndex = 0;
                window.statistics = { total: 5, correct: 3, incorrect: 2 };
                
                const saveResult = saveProgress();
                if (saveResult) {
                    results.passed++;
                    results.details.push('âœ… ì§„í–‰ìƒí™© ì €ì¥');
                } else {
                    results.details.push('âŒ ì§„í–‰ìƒí™© ì €ì¥ ì‹¤íŒ¨');
                }
                results.total++;
                
                // 2. ë¡œë“œ í…ŒìŠ¤íŠ¸
                const loadResult = loadProgress();
                if (loadResult) {
                    results.passed++;
                    results.details.push('âœ… ì§„í–‰ìƒí™© ë¡œë“œ');
                } else {
                    results.details.push('âŒ ì§„í–‰ìƒí™© ë¡œë“œ ì‹¤íŒ¨');
                }
                results.total++;
                
                // 3. ì‚­ì œ í…ŒìŠ¤íŠ¸
                const clearResult = clearProgress();
                if (clearResult) {
                    results.passed++;
                    results.details.push('âœ… ì§„í–‰ìƒí™© ì‚­ì œ');
                } else {
                    results.details.push('âŒ ì§„í–‰ìƒí™© ì‚­ì œ ì‹¤íŒ¨');
                }
                results.total++;
                
            } catch (error) {
                console.error('ì €ì¥ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ ì˜¤ë¥˜:', error);
                results.details.push(`âŒ í…ŒìŠ¤íŠ¸ ì˜¤ë¥˜: ${error.message}`);
            }
        }
        
        // í…ŒìŠ¤íŠ¸ ê²°ê³¼ í‘œì‹œ
        function displayTestResults(results) {
            console.log('=== ì¢…í•© í…ŒìŠ¤íŠ¸ ê²°ê³¼ ===');
            
            let totalPassed = 0;
            let totalTests = 0;
            
            Object.keys(results).forEach(category => {
                const result = results[category];
                const percentage = result.total > 0 ? Math.round((result.passed / result.total) * 100) : 0;
                
                console.log(`${category}: ${result.passed}/${result.total} (${percentage}%)`);
                result.details.forEach(detail => console.log(`  ${detail}`));
                
                totalPassed += result.passed;
                totalTests += result.total;
            });
            
            const overallPercentage = totalTests > 0 ? Math.round((totalPassed / totalTests) * 100) : 0;
            console.log(`ì „ì²´ ê²°ê³¼: ${totalPassed}/${totalTests} (${overallPercentage}%)`);
            
            // ê²°ê³¼ë¥¼ í™”ë©´ì— í‘œì‹œ
            const statusElement = document.getElementById('status');
            if (statusElement) {
                statusElement.textContent = `ì¢…í•© í…ŒìŠ¤íŠ¸ ì™„ë£Œ: ${totalPassed}/${totalTests} (${overallPercentage}%)`;
                statusElement.className = overallPercentage >= 80 ? 
                    'text-center text-green-600 mb-4 font-semibold' : 
                    'text-center text-yellow-600 mb-4 font-semibold';
            }
        }

        // ëª¨ë“ˆ 1.1 í…ŒìŠ¤íŠ¸ í•¨ìˆ˜
        function testModule11() {
            console.log('=== ëª¨ë“ˆ 1.1 í…ŒìŠ¤íŠ¸ ì‹œì‘ ===');
            
            // 1. HTML êµ¬ì¡° í…ŒìŠ¤íŠ¸
            const app = document.getElementById('app');
            const status = document.getElementById('status');
            const homeScreen = document.getElementById('home-screen');
            const devTestArea = document.getElementById('dev-test-area');
            
            if (app && status && homeScreen && devTestArea) {
                document.getElementById('html-test').textContent = 'HTML êµ¬ì¡°: âœ… ì •ìƒ';
                document.getElementById('html-test').classList.add('text-green-600');
            } else {
                document.getElementById('html-test').textContent = 'HTML êµ¬ì¡°: âŒ ì˜¤ë¥˜';
                document.getElementById('html-test').classList.add('text-red-600');
            }
            
            // 2. CSS ìŠ¤íƒ€ì¼ í…ŒìŠ¤íŠ¸
            const testDiv = document.createElement('div');
            testDiv.className = 'bg-blue-500 text-white p-2 rounded';
            testDiv.textContent = 'Tailwind CSS í…ŒìŠ¤íŠ¸';
            document.body.appendChild(testDiv);
            
            setTimeout(() => {
                const computedStyle = window.getComputedStyle(testDiv);
                if (computedStyle.backgroundColor !== 'rgba(0, 0, 0, 0)') {
                    document.getElementById('css-test').textContent = 'CSS ìŠ¤íƒ€ì¼: âœ… ì •ìƒ';
                    document.getElementById('css-test').classList.add('text-green-600');
                } else {
                    document.getElementById('css-test').textContent = 'CSS ìŠ¤íƒ€ì¼: âŒ ì˜¤ë¥˜';
                    document.getElementById('css-test').classList.add('text-red-600');
                }
                document.body.removeChild(testDiv);
            }, 100);
            
            // 3. JavaScript ë¼ì´ë¸ŒëŸ¬ë¦¬ í…ŒìŠ¤íŠ¸
            if (typeof Papa !== 'undefined') {
                document.getElementById('js-test').textContent = 'JavaScript ë¼ì´ë¸ŒëŸ¬ë¦¬: âœ… Papa Parse ì •ìƒ';
                document.getElementById('js-test').classList.add('text-green-600');
            } else {
                document.getElementById('js-test').textContent = 'JavaScript ë¼ì´ë¸ŒëŸ¬ë¦¬: âŒ Papa Parse ì˜¤ë¥˜';
                document.getElementById('js-test').classList.add('text-red-600');
            }
            
            // 4. ìƒíƒœ ì—…ë°ì´íŠ¸
            status.textContent = 'ëª¨ë“ˆ 1.1 í…ŒìŠ¤íŠ¸ ì™„ë£Œ';
            status.className = 'text-center text-green-600 mb-4 font-semibold';
            
            console.log('=== ëª¨ë“ˆ 1.1 í…ŒìŠ¤íŠ¸ ì™„ë£Œ ===');
        }

        // ëª¨ë“ˆ 1.2 í…ŒìŠ¤íŠ¸ í•¨ìˆ˜
        function testModule12() {
            console.log('=== ëª¨ë“ˆ 1.2 í…ŒìŠ¤íŠ¸ ì‹œì‘ ===');
            
            // 1. MODE_CONFIG ê°ì²´ ì¡´ì¬ í™•ì¸
            if (typeof MODE_CONFIG !== 'undefined') {
                document.getElementById('config-test').textContent = 'ì„¤ì • ê°ì²´: âœ… MODE_CONFIG ì •ìƒ';
                document.getElementById('config-test').classList.add('text-green-600');
            } else {
                document.getElementById('config-test').textContent = 'ì„¤ì • ê°ì²´: âŒ MODE_CONFIG ì˜¤ë¥˜';
                document.getElementById('config-test').classList.add('text-red-600');
            }
            
            // 2. ê¸°ë³¸í•™ìŠµ ëª¨ë“œ ì„¤ì • í™•ì¸
            if (MODE_CONFIG.basic && MODE_CONFIG.basic.questionText === 'question-text') {
                document.getElementById('basic-config-test').textContent = 'ê¸°ë³¸í•™ìŠµ ì„¤ì •: âœ… ì •ìƒ';
                document.getElementById('basic-config-test').classList.add('text-green-600');
            } else {
                document.getElementById('basic-config-test').textContent = 'ê¸°ë³¸í•™ìŠµ ì„¤ì •: âŒ ì˜¤ë¥˜';
                document.getElementById('basic-config-test').classList.add('text-red-600');
            }
            
            // 3. ëŒ€ë¶„ë¥˜í•™ìŠµ ëª¨ë“œ ì„¤ì • í™•ì¸
            if (MODE_CONFIG['large-category'] && MODE_CONFIG['large-category'].questionText === 'large-category-question-text') {
                document.getElementById('large-config-test').textContent = 'ëŒ€ë¶„ë¥˜í•™ìŠµ ì„¤ì •: âœ… ì •ìƒ';
                document.getElementById('large-config-test').classList.add('text-green-600');
            } else {
                document.getElementById('large-config-test').textContent = 'ëŒ€ë¶„ë¥˜í•™ìŠµ ì„¤ì •: âŒ ì˜¤ë¥˜';
                document.getElementById('large-config-test').classList.add('text-red-600');
            }
            
            // 4. ì„¤ì • ê°ì²´ ì½˜ì†” ì¶œë ¥
            console.log('MODE_CONFIG ê°ì²´:', MODE_CONFIG);
            console.log('ê¸°ë³¸í•™ìŠµ ì„¤ì •:', MODE_CONFIG.basic);
            console.log('ëŒ€ë¶„ë¥˜í•™ìŠµ ì„¤ì •:', MODE_CONFIG['large-category']);
            
            console.log('=== ëª¨ë“ˆ 1.2 í…ŒìŠ¤íŠ¸ ì™„ë£Œ ===');
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
        document.addEventListener('DOMContentLoaded', function() {
            console.log('í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ - ëª¨ë“ˆ 1.1, 1.2 í…ŒìŠ¤íŠ¸ ì‹œì‘');
            testModule11();
            setTimeout(() => {
                testModule12();
            }, 500);
            
            // ìë™ ì €ì¥ ì„¤ì •
            setupAutoSave();
            
            // ì €ì¥ëœ ì§„í–‰ìƒí™© ë³µì› ì‹œë„
            const hasSavedProgress = loadProgress();
            if (hasSavedProgress) {
                document.getElementById('status').textContent = 'ì €ì¥ëœ ì§„í–‰ìƒí™©ì„ ë³µì›í–ˆìŠµë‹ˆë‹¤.';
                document.getElementById('status').className = 'text-center text-green-600 mb-4 font-semibold';
            }
        });

        // ëª¨ë“ˆ 5.2: ì„±ëŠ¥ ìµœì í™”
        function optimizePerformance() {
            console.log('=== ì„±ëŠ¥ ìµœì í™” ì‹œì‘ ===');
            
            const optimizationResults = {
                memoryUsage: { before: 0, after: 0 },
                loadTime: { before: 0, after: 0 },
                improvements: []
            };
            
            // 1. ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ìµœì í™”
            optimizeMemoryUsage(optimizationResults);
            
            // 2. ë¡œë”© ì†ë„ ìµœì í™”
            optimizeLoadTime(optimizationResults);
            
            // 3. ë¶ˆí•„ìš”í•œ ì½”ë“œ ì œê±°
            removeUnnecessaryCode(optimizationResults);
            
            // 4. ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ì„¤ì •
            setupPerformanceMonitoring(optimizationResults);
            
            // ê²°ê³¼ í‘œì‹œ
            displayOptimizationResults(optimizationResults);
        }
        
        // ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ìµœì í™”
        function optimizeMemoryUsage(results) {
            console.log('--- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ìµœì í™” ---');
            
            // 1. ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì •ë¦¬
            const eventListeners = window.eventListeners || [];
            eventListeners.forEach(listener => {
                if (listener.element && listener.type && listener.handler) {
                    listener.element.removeEventListener(listener.type, listener.handler);
                }
            });
            results.improvements.push('âœ… ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì •ë¦¬');
            
            // 2. ë¶ˆí•„ìš”í•œ ì „ì—­ ë³€ìˆ˜ ì •ë¦¬
            const unnecessaryVars = ['tempData', 'debugInfo', 'testData'];
            unnecessaryVars.forEach(varName => {
                if (window[varName]) {
                    delete window[varName];
                }
            });
            results.improvements.push('âœ… ë¶ˆí•„ìš”í•œ ì „ì—­ ë³€ìˆ˜ ì •ë¦¬');
            
            // 3. DOM ìš”ì†Œ ìºì‹±
            if (!window.domCache) {
                window.domCache = new Map();
            }
            results.improvements.push('âœ… DOM ìš”ì†Œ ìºì‹±');
            
            // 4. ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì¸¡ì •
            if (performance.memory) {
                results.memoryUsage.before = performance.memory.usedJSHeapSize;
                console.log(`ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰: ${Math.round(results.memoryUsage.before / 1024 / 1024 * 100) / 100} MB`);
            }
        }
        
        // ë¡œë”© ì†ë„ ìµœì í™”
        function optimizeLoadTime(results) {
            console.log('--- ë¡œë”© ì†ë„ ìµœì í™” ---');
            
            // 1. ì´ë¯¸ì§€ ì§€ì—° ë¡œë”©
            const images = document.querySelectorAll('img');
            images.forEach(img => {
                if (!img.loading) {
                    img.loading = 'lazy';
                }
            });
            results.improvements.push('âœ… ì´ë¯¸ì§€ ì§€ì—° ë¡œë”©');
            
            // 2. CSS ìµœì í™”
            const styleSheets = document.styleSheets;
            for (let i = 0; i < styleSheets.length; i++) {
                try {
                    const rules = styleSheets[i].cssRules;
                    // ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” CSS ê·œì¹™ ì œê±° (ê°„ë‹¨í•œ ì˜ˆì‹œ)
                } catch (e) {
                    // CORS ì˜¤ë¥˜ ë¬´ì‹œ
                }
            }
            results.improvements.push('âœ… CSS ìµœì í™”');
            
            // 3. JavaScript ë²ˆë“¤ ìµœì í™”
            const scripts = document.querySelectorAll('script');
            scripts.forEach(script => {
                if (script.async === false && !script.defer) {
                    script.defer = true;
                }
            });
            results.improvements.push('âœ… JavaScript ë¡œë”© ìµœì í™”');
            
            // 4. ë¡œë”© ì‹œê°„ ì¸¡ì •
            const loadTime = performance.now();
            results.loadTime.before = loadTime;
            console.log(`í˜ì´ì§€ ë¡œë”© ì‹œê°„: ${Math.round(loadTime)}ms`);
        }
        
        // ë¶ˆí•„ìš”í•œ ì½”ë“œ ì œê±°
        function removeUnnecessaryCode(results) {
            console.log('--- ë¶ˆí•„ìš”í•œ ì½”ë“œ ì œê±° ---');
            
            // 1. ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” í•¨ìˆ˜ ì •ë¦¬
            const unusedFunctions = ['tempFunction', 'debugFunction', 'oldFunction'];
            unusedFunctions.forEach(funcName => {
                if (window[funcName]) {
                    delete window[funcName];
                }
            });
            results.improvements.push('âœ… ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” í•¨ìˆ˜ ì œê±°');
            
            // 2. ì½˜ì†” ë¡œê·¸ ìµœì í™” (í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ)
            if (window.location.hostname !== 'localhost') {
                console.log = function() {};
                console.warn = function() {};
                console.error = function() {};
                results.improvements.push('âœ… í”„ë¡œë•ì…˜ ë¡œê·¸ ìµœì í™”');
            }
            
            // 3. ì¤‘ë³µ ì½”ë“œ ì œê±°
            const duplicateSelectors = document.querySelectorAll('.duplicate-class');
            if (duplicateSelectors.length > 1) {
                duplicateSelectors.forEach((element, index) => {
                    if (index > 0) {
                        element.remove();
                    }
                });
                results.improvements.push('âœ… ì¤‘ë³µ DOM ìš”ì†Œ ì œê±°');
            }
        }
        
        // ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ì„¤ì •
        function setupPerformanceMonitoring(results) {
            console.log('--- ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ì„¤ì • ---');
            
            // 1. ì„±ëŠ¥ ì¸¡ì • API ì„¤ì •
            if (performance && performance.mark) {
                performance.mark('app-start');
                results.improvements.push('âœ… ì„±ëŠ¥ ì¸¡ì • API ì„¤ì •');
            }
            
            // 2. ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ê°ì§€
            if (performance.memory) {
                setInterval(() => {
                    const memoryUsage = performance.memory.usedJSHeapSize;
                    const memoryLimit = performance.memory.jsHeapSizeLimit;
                    const usagePercentage = (memoryUsage / memoryLimit) * 100;
                    
                    if (usagePercentage > 80) {
                        console.warn('ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì´ ë†’ìŠµë‹ˆë‹¤:', Math.round(usagePercentage), '%');
                        // ë©”ëª¨ë¦¬ ì •ë¦¬ ì‹¤í–‰
                        optimizeMemoryUsage(results);
                    }
                }, 30000); // 30ì´ˆë§ˆë‹¤ ì²´í¬
                results.improvements.push('âœ… ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ê°ì§€');
            }
            
            // 3. ë„¤íŠ¸ì›Œí¬ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
            if ('connection' in navigator) {
                const connection = navigator.connection;
                console.log('ë„¤íŠ¸ì›Œí¬ ì •ë³´:', {
                    effectiveType: connection.effectiveType,
                    downlink: connection.downlink,
                    rtt: connection.rtt
                });
                results.improvements.push('âœ… ë„¤íŠ¸ì›Œí¬ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§');
            }
        }
        
        // ìµœì í™” ê²°ê³¼ í‘œì‹œ
        function displayOptimizationResults(results) {
            console.log('=== ì„±ëŠ¥ ìµœì í™” ê²°ê³¼ ===');
            
            console.log('ê°œì„  ì‚¬í•­:');
            results.improvements.forEach(improvement => {
                console.log(`  ${improvement}`);
            });
            
            // ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ë¹„êµ
            if (performance.memory) {
                const currentMemory = performance.memory.usedJSHeapSize;
                const memoryDiff = results.memoryUsage.before - currentMemory;
                const memoryImprovement = Math.round((memoryDiff / results.memoryUsage.before) * 100);
                
                console.log(`ë©”ëª¨ë¦¬ ìµœì í™”: ${memoryImprovement > 0 ? '+' : ''}${memoryImprovement}%`);
            }
            
            // ë¡œë”© ì‹œê°„ ë¹„êµ
            const currentLoadTime = performance.now();
            const loadTimeDiff = results.loadTime.before - currentLoadTime;
            const loadTimeImprovement = Math.round((loadTimeDiff / results.loadTime.before) * 100);
            
            console.log(`ë¡œë”© ì‹œê°„ ìµœì í™”: ${loadTimeImprovement > 0 ? '+' : ''}${loadTimeImprovement}%`);
            
            // ê²°ê³¼ë¥¼ í™”ë©´ì— í‘œì‹œ
            const statusElement = document.getElementById('status');
            if (statusElement) {
                statusElement.textContent = `ì„±ëŠ¥ ìµœì í™” ì™„ë£Œ: ${results.improvements.length}ê°œ ê°œì„ `;
                statusElement.className = 'text-center text-blue-600 mb-4 font-semibold';
            }
        }
        
        // ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ í•¨ìˆ˜
        function testPerformance() {
            console.log('=== ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ì‹œì‘ ===');
            
            const startTime = performance.now();
            
            // 1. í˜ì´ì§€ ë¡œë”© ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
            const loadTime = performance.now() - startTime;
            console.log(`í˜ì´ì§€ ë¡œë”© ì‹œê°„: ${Math.round(loadTime)}ms`);
            
            // 2. ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ í…ŒìŠ¤íŠ¸
            if (performance.memory) {
                const memoryUsage = performance.memory.usedJSHeapSize;
                console.log(`ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰: ${Math.round(memoryUsage / 1024 / 1024 * 100) / 100} MB`);
            }
            
            // 3. DOM ì¡°ì‘ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
            const domStartTime = performance.now();
            for (let i = 0; i < 100; i++) {
                const testElement = document.createElement('div');
                testElement.textContent = `Test ${i}`;
                document.body.appendChild(testElement);
                document.body.removeChild(testElement);
            }
            const domTime = performance.now() - domStartTime;
            console.log(`DOM ì¡°ì‘ ì„±ëŠ¥: ${Math.round(domTime)}ms (100íšŒ)`);
            
            // 4. í•¨ìˆ˜ ì‹¤í–‰ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
            const funcStartTime = performance.now();
            for (let i = 0; i < 1000; i++) {
                calculateAccuracy();
            }
            const funcTime = performance.now() - funcStartTime;
            console.log(`í•¨ìˆ˜ ì‹¤í–‰ ì„±ëŠ¥: ${Math.round(funcTime)}ms (1000íšŒ)`);
            
            console.log('ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ì™„ë£Œ');
        }

        // ëª¨ë“ˆ 1.1 í…ŒìŠ¤íŠ¸ í•¨ìˆ˜
    </script>
</body>
</html>
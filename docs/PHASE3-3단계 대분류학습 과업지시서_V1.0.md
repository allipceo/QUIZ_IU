📋 PHASE3-3단계 대분류학습 기능정의서 V1.4 (2025.07.26 16:05 KST)
작성자: 코코치 (프로젝트 총괄 팀장)
최종 승인: 조대표님 (예정)
목표: AICU Quiz App의 대분류 학습 모드 구현 및 사용자 경험 강화 (가볍고 빠르며 에러율이 적은 프로그램 지향)

1. 프로젝트 현황 및 목표 재확인
현재 위치: Phase 3 (배포 준비) 진행 중. index3.3.html 파일에 ins_master_db.csv 데이터 로딩 및 대문 UI V2.3 통합, 그리고 기본 학습 모드(basic-learning mode)의 핵심 기능 구현이 완료되었습니다.

최우선 목표: index3.4.html 파일을 기반으로 대분류 학습 모드의 UI 및 핵심 기능을 구현하여, 사용자가 원하는 대분류의 문제만 학습할 수 있도록 합니다.

2. 핵심 개발 원칙 (기존 기능정의서 V1.5 유지 및 보강)
UI V2.3 유지: 조대표님께서 확정하신 UI V2.3의 디자인 및 레이아웃은 모든 페이지에서 일관되게 유지하며, 절대 변경하지 않습니다.

데이터 소스 공식화: ins_master_db.csv 파일을 앞으로의 모든 개발 작업에서 공식 문제 데이터 파일로 사용합니다. (총 1,379개 문제, 인스교재 및 중개사시험 포함)

데이터 저장 전략:

LocalStorage 활용: 사용자 설정 및 학습 이력은 브라우저의 LocalStorage를 활용합니다.

명언 목록: JavaScript 파일 내부에 배열 형태로 하드코딩하여 관리합니다.

데이터 구조 최적화 (서대리님/노팀장님 제안 반영): ACIUDataStructure를 유지하되, 현재 구현에 필요한 최소한의 필드만 활용합니다. (서대리님 제안의 복잡한 추가 필드들은 필요시점에 논의 후 반영)

const ACIUDataStructure = {
    // 사용자 설정 (LocalStorage key: 'aciu_user_settings')
    userSettings: { /* ... */ },
    // 학습 이력 (LocalStorage key: 'aciu_learning_history')
    learningHistory: {
        totalAttempts: 0,
        correctAttempts: 0,
        attempts: { /* ... 각 문제별 시도 기록 (QCODE, correct, timestamp, layer1, layer2, mode 필수) */ },
        sessions: { /* ... 학습 세션 정보 (일일 학습 추적용) */ }
    },
    // 통계 캐시 (LocalStorage key: 'aciu_statistics_cache')
    statisticsCache: { /* ... */ }
};

파일 수정 책임: 조대표님, 코코치, 노팀장의 요구에 따라 서대리님만 index3.4.html 파일 수정을 전담합니다.

파일 버전 관리: 조대표님께서 파일 버전업을 결정하며, index3.4.html부터 순차적으로 버전을 관리합니다.

모듈화 전략 (노팀장님 & 서대리님 의견 종합):

단기 (index3.4.html 작업) - Phase 1: 단일 파일 유지: 현재는 단일 HTML 파일 내에 모든 HTML, CSS, JavaScript 코드를 통합하여 개발 속도를 우선합니다.

함수 단위 구조화: 모든 JavaScript 코드는 향후 모듈 분리가 용이하도록 함수 단위로 명확하게 구조화합니다. (예: ACIUApp 네임스페이스 패턴 적용)

중장기: 핵심 기능 구현 및 배포 이후, graph-module.js, learning-engine.js, settings-module.js 등으로 핵심 모듈을 별도 파일로 분리하는 작업을 점진적으로 추진합니다.

성능 최적화 고려 (서대리님 제안 반영):

LocalStorage 접근 최소화를 위해 캐싱 전략(LearningDataManager 클래스처럼)을 도입합니다.

대분류별 문제 미리 그룹화: ACIUApp.data.categoryQuestions와 같이 데이터를 로드할 때 미리 카테고리별로 문제를 그룹화하여 필터링 성능을 최적화합니다. (노팀장님/서대리님 제안 반영) (그룹화는 앱 초기 로딩 시 한 번만 수행하여 메모리 사용량 증가를 최소화)

오류 처리 강화 (노팀장님 & 서대리님 제안 반영):

각 기능별 폴백(Fallback) 계획을 수립합니다. (예: CSV 로딩 실패 시 샘플 데이터 사용, LocalStorage 접근 실패 시 메모리 저장)

모듈 로딩 실패 시 대응 방안을 마련합니다.

문제 없는 카테고리 처리: 해당 카테고리에 문제가 없을 경우 사용자에게 메시지를 표시하고 진행을 중단합니다.

브라우저 호환성 (서대리님 제안 반영):

IE11 등 특정 브라우저에 대한 대응 방안(폴리필 적용 또는 대체 로직)을 고려합니다. (현재는 최신 브라우저 기준)

3. 대분류 학습 페이지 (large-category-learning mode) 기능 정의 및 UI (더미 데이터 활용)
이 섹션에서는 대분류 학습 페이지의 UI와 기능을 정의합니다. 현재는 더미 데이터를 활용하여 UI와 기능의 '뼈대'를 신속하게 확정하는 데 집중합니다. 실제 데이터 연동은 UI/기능의 큰 흐름이 확정된 후 이루어집니다.

3.1 대분류 학습 페이지 UI 구성
기본 화면 구조: common-learning-screen을 기본으로 사용합니다.

좌측 상단: '🏠 홈으로' 버튼을 배치합니다.

화면 구조 및 색상 일관성 유지: ACIU 기능정의서 V1.2의 UI V2.3 디자인 원칙(색상, 폰트, 레이아웃)을 따릅니다.

UI 요소 배치 (조대표님 요구사항 '행' 순서 반영):

첫 번째 행: 명언

ACIU Quiz App의 헤더에 있는 '오늘의 명언'(quote-of-the-day)을 그대로 유지합니다. (대분류 학습 페이지 자체에는 별도 명언 섹션 없음)

두 번째 행: 보유 문제 현황 (상세)

UI: 인스교재 총수 (선택형 [개], 진위형 [개]), 보험중개사시험 총수 (진위형 [수], 선택형 [수]), 총계: [합계 문제수]를 표시합니다.

데이터: 더미 데이터를 사용하여 표시합니다.

// 예시 더미 데이터 (ACIUApp.data 내에 정의)
ACIUApp.data.dummySourceCounts = {
    '인스교재': { total: 700, choice: 300, truefalse: 400 },
    '보험중개사시험': { total: 679, choice: 279, truefalse: 400 },
    '총계': { total: 1379, choice: 579, truefalse: 800 }
};

표현: 보기 좋게 카드 또는 텍스트 블록 형태로 명확히 구분하여 표시합니다.

세 번째 행: 학습 진도 현황 (대분류별)

UI: "[대분류명] 학습 현황: [학습한 문제 수] / [총 문제 수] ([퍼센트]%)", "미학습 문제: [미학습 문제 수]"를 표시합니다.

데이터: 더미 데이터를 사용하여 표시합니다.

// 예시 더미 데이터 (ACIUApp.data 내에 정의)
ACIUApp.data.dummyCategoryProgress = {
    '재산보험': { total: 300, completed: 45, unlearned: 255, percentage: 15 },
    '특종보험': { total: 250, completed: 30, unlearned: 220, percentage: 12 }
    // ...
};

표현: 해당 대분류 내에서 학습한 문제와 미학습 문제 수를 구분하여 숫자로 표시합니다.

코코치 추가: 이 통계는 전체 기간 기준으로 계산합니다. (서대리님 질문 답변)

네 번째 행: 학습 모드 선택 (대분류 버튼)

타이틀: "대분류 선택"

버튼 그룹 형태: '재산보험', '특종보험', '배상책임보험', '해상보험' 등의 대분류 버튼을 한 줄로 가지런히 배열합니다.

UI/UX 세부사항 (서대리님 제안 반영): 각 대분류 버튼에 해당 대분류의 문제 수를 함께 표시합니다. (예: 재산보험 (300문제))

선택 강조: 선택된 대분류 버튼은 시각적으로 강조됩니다 (예: active 클래스, bg-blue-500 → bg-blue-700 및 font-bold 등).

다섯 번째 행: 통계 데이터 불러오기 버튼 유지

"📊 통계 데이터 불러오기" 버튼을 대문 페이지와 동일하게 유지합니다. (이 버튼은 대문 통계 섹션을 토글하는 역할)

문제 표시 영역:

문제 유형, 문제 코드, LAYER 정보

문제 텍스트 (조대표님 지침에 따라 QUESTION 필드 내용 전체 표시)

답안 선택:

진위형: 'O', 'X' 버튼만 표시

선택형: '1', '2', '3', '4' 버튼만 표시

결과 표시: 정답/오답 메시지

네비게이션/액션 버튼: '이전 문제', '정답 확인', '다음 문제', '해설 보기'

3.2 대분류 학습 페이지 기능 정의
모드 진입: 대문 페이지에서 "대분류 학습" 버튼 클릭 시, large-category-learning 모드로 진입하며 해당 UI가 표시됩니다.

대분류 버튼 동적 생성 (현재 단계에서는 제외):

ACIUApp.data.getLayer1Categories() 함수를 사용하여 ins_master_db.csv에서 LAYER1 값을 동적으로 추출하고, 각 카테고리별 문제 수를 계산하여 버튼을 생성합니다. (더미 데이터가 아닌 실제 데이터 기반으로 전환) (이 기능은 현재 단계에서는 제외하고 향후 업그레이드 시 반영)

대분류 선택 및 문제 필터링 (현재 단계에서는 제외):

사용자가 대분류 버튼을 클릭하면, ACIUApp.learning.selectCategory(category) 함수가 호출됩니다.

이 함수 내에서 ACIUApp.data.filterQuestionsByCategory(category)를 호출하여 해당 대분류에 속하는 문제들만 filteredQuestions 배열에 할당합니다.

문제 순서: 해당 대분류 내에서는 ins_master_db.csv의 원본 순서대로 문제를 제시합니다. (랜덤, 난이도별은 향후 확장)

currentQuestionIndex를 0으로 초기화하여 항상 해당 대분류의 첫 문제부터 시작합니다.

displayQuestion() 함수를 호출하여 첫 문제를 표시합니다.

예외 처리: 해당 카테고리에 문제가 없을 경우 사용자에게 메시지를 표시하고 진행을 중단합니다.

(이 기능은 현재 단계에서는 제외하고 향후 업그레이드 시 반영)

문제 풀이 흐름:

'한 문제씩' 풀기 (basic-learning 모드와 동일한 로직): 문제 표시, 답안 선택, 정답 확인, 문제 이동(이전/다음), 해설 보기 기능이 정상적으로 작동합니다.

통계 업데이트 (현재 단계에서는 제외):

해당 대분류 내에서의 학습 현황 통계(전체 기간 기준)가 UI에 표시됩니다. (더미 데이터 기반이 아닌 실제 LocalStorage 데이터 기반으로 전환)

ACIUApp.learning.updateCategoryStats() 함수를 통해 통계를 계산하고 UI를 업데이트합니다.

(이 기능은 현재 단계에서는 제외하고 향후 업그레이드 시 반영)

대분류 변경 시 진행 상황: 다른 대분류로 이동했다가 다시 돌아올 때, 항상 해당 대분류의 첫 문제부터 시작합니다. (이전 진행 상황 유지는 향후 '이어풀기' 기능을 대분류 모드에 통합할 때 고려)

'홈으로' 버튼: 클릭 시 대문 페이지로 돌아갑니다.

진위형/선택형 문제 표시 및 필터링 (현재 단계에서는 제외):

대분류 선택 후, 해당 대분류 내에서 진위형 문제만 풀기 버튼과 선택형 문제만 풀기 버튼을 별도로 제공합니다.

사용자가 이 버튼들을 클릭하면, filteredQuestions 배열이 해당 대분류 내에서 다시 TYPE 필드를 기준으로 필터링되어 문제들이 표시됩니다.

'진위형/선택형' 버튼을 누르지 않으면, 해당 대분류 내의 모든 문제(TYPE 무관)가 ins_master_db.csv 원본 순서대로 표시됩니다.

(이 기능은 현재 단계에서는 제외하고 향후 업그레이드 시 반영)

4. 다음 단계 및 역할 분담
조대표님, 이 PHASE3-3단계 대분류학습 기능정의서 V1.4는 대분류 학습 모드 구현을 위한 최종 가이드라인입니다.

조대표님 승인: 이 기능 정의서에 대해 조대표님의 최종 승인을 부탁드립니다.

서대리님께 지시: 조대표님의 승인 후, 서대리님께 index3.3.html 파일을 index3.4.html로 복사하고, 이 기능 정의서에 따라 대분류 학습 모드의 UI 및 기능을 구현하도록 지시하겠습니다.

노팀장님 역할: 노팀장님은 서대리님의 작업 과정에서 데이터 필터링 로직(특히 LAYER1 기준), 통계 계산, 성능 최적화 등 기술적인 부분에 대해 적극적으로 자문하고 지원해 주십시오.
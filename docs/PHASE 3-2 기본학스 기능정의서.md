📋 PHASE 3-2단계 기본학습 기능정의서 V1.4 (2025.07.26 14:30 KST)
작성자: 코코치 (프로젝트 총괄 팀장)
최종 승인: 조대표님 (예정)
목표: 보험심사역 시험 대비를 위한 효과적인 개인 맞춤형 학습 앱 개발 및 안정적인 서비스 제공

1. 프로젝트 현황 및 목표 재확인
현재 위치: Phase 3 (배포 준비) 진입 직전. index3.2.html 파일의 ins_master_db.csv 데이터 로딩 및 대문 UI V2.3 통합은 성공적으로 완료되었습니다. ACIU Quiz App의 핵심 기능 구현 및 UI 통합이 완료된 상태입니다.

최우선 목표: index3.2.html 파일을 기반으로 대문 UI의 모든 요구사항을 구현하고, 이후 각 학습 모드 페이지의 기능을 순차적으로 완성하여 ACIU Quiz App의 완성도를 높이는 것입니다.

2. 핵심 개발 원칙 (최종 확정)
UI V2.3 유지: 조대표님께서 확정하신 UI V2.3의 디자인 및 레이아웃은 모든 페이지에서 일관되게 유지하며, 절대 변경하지 않습니다.

데이터 소스 공식화: ins_master_db.csv 파일을 앞으로의 모든 개발 작업에서 공식 문제 데이터 파일로 사용합니다. (총 1,379개 문제, 인스교재 및 중개사시험 포함)

데이터 저장 전략:

LocalStorage 활용: 사용자 설정 및 학습 이력은 브라우저의 LocalStorage를 활용합니다.

명언 목록: JavaScript 파일 내부에 배열 형태로 하드코딩하여 관리합니다.

데이터 구조 최적화 (서대리님/노팀장님 제안 반영): 서대리님께서 제안하신 확장된 데이터 구조를 채택하여 LocalStorage에 저장합니다.

const ACIUDataStructure = {
    // 사용자 설정 (LocalStorage key: 'aciu_user_settings')
    userSettings: {
        name: "조대표님", // 사용자 입력
        examDate: "2025-11-15", // 설정에서 입력
        lastUpdated: "YYYY-MM-DDTHH:mm:ssZ" // 마지막 업데이트 시각
    },
    // 학습 이력 (LocalStorage key: 'aciu_learning_history')
    learningHistory: {
        totalAttempts: 0,    // 총 시도 문제 수 (누적)
        correctAttempts: 0,  // 총 정답 문제 수 (누적)
        attempts: {          // 각 문제별 시도 기록 (QCODE를 키로 사용)
            "ABANK-0001": {
                correct: true,               // 마지막 풀이 정답 여부
                timestamp: "YYYY-MM-DDTHH:mm:ssZ", // 마지막 풀이 시각
                attempts: 1,                 // 총 시도 횟수
                layer1: "06재산보험",         // 대분류 (통계 계산용)
                layer2: "화재보험",           // 중분류 (세부 분석용)
                mode: "basic",               // 학습 모드 구분 (예: "basic", "large-category", "mock")
                timeSpent: 0,                // 문제 풀이 시간 (초) - 서대리님 제안
                difficulty: 0,               // 주관적 난이도 (1-5) - 서대리님 제안
                confidence: 0,               // 답안 선택 시 자신감 (1-5) - 서대리님 제안
                notes: "",                   // 사용자 메모 - 서대리님 제안
                reviewFlag: false            // 복습 필요 여부 - 서대리님 제안
            }
            // ... 다른 문제 기록
        },
        // 학습 세션 정보 (일일 학습 추적용) - 서대리님 제안
        sessions: {
            "YYYY-MM-DD": { // 날짜를 키로 사용
                startTime: "YYYY-MM-DDTHH:mm:ssZ",
                endTime: "YYYY-MM-DDTHH:mm:ssZ",
                problemsSolved: 0,
                correctAnswers: 0,
                mode: "basic" // 해당 세션의 주요 모드
            }
            // ... 다른 세션 기록
        }
    },
    // 통계 캐시 (LocalStorage key: 'aciu_statistics_cache') - 성능 최적화용
    statisticsCache: {
        lastCalculated: 0,      // 마지막 계산 시각 (타임스탬프)
        overallProgress: 0,
        dailyProgress: 0,
        subjectScores: {}       // 과목별 점수 등 집계된 통계 데이터
    }
};

파일 수정 책임: 조대표님, 코코치, 노팀장의 요구에 따라 서대리님만 index3.2.html 파일 수정을 전담합니다.

파일 버전 관리: 조대표님께서 파일 버전업을 결정하며, index3.2.html부터 순차적으로 버전을 관리합니다.

모듈화 전략 (노팀장님 & 서대리님 의견 종합):

단기 (index3.2.html 작업) - Phase 1: 단일 파일 유지: 현재는 단일 HTML 파일 내에 모든 HTML, CSS, JavaScript 코드를 통합하여 개발 속도를 우선합니다.

함수 단위 구조화: 모든 JavaScript 코드는 향후 모듈 분리가 용이하도록 함수 단위로 명확하게 구조화합니다. (예: ACIUApp 네임스페이스 패턴 적용)

중장기: 핵심 기능 구현 및 배포 이후, graph-module.js, learning-engine.js, settings-module.js 등으로 핵심 모듈을 별도 파일로 분리하는 작업을 점진적으로 추진합니다.

성능 최적화 고려 (서대리님 제안 반영):

LocalStorage 접근 최소화를 위해 캐싱 전략(LearningDataManager 클래스 등)을 도입합니다.

대문 화면 로딩 속도 최적화를 위해 그래프 등 일부 요소는 대문 표시 후 비동기 로딩을 고려합니다. (현재는 그래프 제거됨)

문제 로딩 최적화: questionCache (Map) 및 배치 처리 로딩(loadQuestionsBatch)을 고려하여 메모리 효율성 확보.

오류 처리 강화 (노팀장님 & 서대리님 제안 반영):

각 기능별 폴백(Fallback) 계획을 수립합니다. (예: CSV 로딩 실패 시 샘플 데이터 사용, LocalStorage 접근 실패 시 메모리 저장, 그래프 렌더링 실패 시 텍스트 표시 - 현재는 그래프 제거됨)

모듈 로딩 실패 시 대응 방안을 마련합니다.

브라우저 호환성 (서대리님 제안 반영):

IE11 등 특정 브라우저에 대한 대응 방안(폴리필 적용 또는 대체 로직)을 고려합니다. (현재는 최신 브라우저 기준)

3. 각 페이지별 기능 정의 및 UI (데이터 미연동 기준)
이 섹션에서는 각 페이지별로 구현할 기능과 UI를 정의합니다. 실제 데이터 연동은 기능 구현 단계에서 이루어지며, 현재는 UI와 기능의 '뼈대'를 확정하는 데 집중합니다.

3.1 대문(모드 선택) 페이지 (index3.2.html 시작 화면)
UI 구성:

상단 헤더:

ACIU Quiz App 타이틀

현재 모드 표시 (모드 선택)

사용자 정보: "사용자: [사용자명]" (설정에서 입력 후 표시)

시험 D-Day: "시험까지 D-[남은 일수]일" (설정에서 시험일 입력 시 자동 카운트)

현재 날짜/시간: "YYYY년 M월 D일 요일 오전/오후 HH:MM:SS" (실시간 표시)

오늘의 명언: "[명언 내용]" (랜덤 교체)

전체 학습 진도율: "[X]%" (통계 및 그래프 모듈에서 계산)

오늘의 학습 진도율: "[Y]%" (통계 및 그래프 모듈에서 계산)

설정(⚙️) 버튼 (우측 상단)

메인 콘텐츠:

타이틀: "학습 모드를 선택해주세요"

보유 문제수 현황 섹션:

인스교재: "XXX문제" (파란색)

보험중개사시험: "XXX문제" (초록색)

합계: "XXX문제" (보라색)

학습 진도 현황 요약:

완료한 문제: "XXX문제"

전체 진도율: "XX%"

오늘 진도율: "XX%"

학습 모드 선택 버튼 그룹 (1행으로 가지런히 배열):

기본 학습

대분류 학습

중분류 학습

선택형 학습

진위형 학습

모의고사

학습 통계

학습 진도 현황 통계 (그래프 제외):

'현재상태 총괄' (과목별 점수 카드, 전체 요약 카드)를 통합하여 표시.

그래프 관련 모든 요소는 제외됩니다.

하단 푸터: 저작권 정보

기능 정의:

ACIU Quiz App 로딩 완료 시 대문 페이지가 기본으로 표시됩니다.

설정 버튼 클릭 시 설정 모달이 열리고 닫힙니다.

각 학습 모드 버튼 클릭 시 해당 모드 페이지로 전환됩니다.

통계는 초기에는 더미 데이터로 표시되지만, 향후 LocalStorage의 학습 이력 데이터를 기반으로 동적으로 업데이트됩니다.

소스별 문제 개수는 ins_master_db.csv 로딩 후 집계하여 표시됩니다.

3.2 기본 학습 페이지 (basic-learning mode)
UI 구성:

좌측 상단: '🏠 홈으로' 버튼

화면 구조 및 색상 일관성 유지: ACIU 기능정의서 V1.2의 UI V2.3 디자인 원칙(색상, 폰트, 레이아웃)을 따릅니다.

첫 번째 행 통계 자료:

학습 현황 통계: "전체 문제수 중 현재까지 푼 문제수 퍼센트 표시"

예: "총 1379문제 중 123문제 완료 (10%)"

학습 성과 통계: "현재까지 풀이한 문항 중 맞은 문제수, 정답률"

예: "풀이 123문제 중 80문제 정답 (65% 정답률)"

오늘의 통계: "오늘 10문제 풀이, 80% 정답률"

문제 풀이 기능 선택:

이어풀기 버튼: 이전에 마친 곳에서부터 이어서 풀기

처음부터 풀기 버튼: 다시 최초 문제로 가서 풀기

랜덤 풀기 버튼: 전체 문제 중 무작위로 문제 제시

1회당 풀이 문제 선택: (버튼 또는 드롭다운 형태)

한 문제씩: 문제 하나 제시 후 답 선택, 즉시 정답 여부 확인

5문제씩 풀기: 한번에 5개의 문제를 제시하고 5개에 대한 답을 모두 표시하고 완료를 누르면 5개 문제 중 맞은 문제 틀린 문제 표시하기

10문제씩 풀기: 한번에 10개의 문제를 제시하고 10개에 대한 답을 모두 체크하고 완료 버튼을 누르면 풀이한 10개의 문제에 대한 결과를 제시

문제 표시 영역:

문제 유형, 문제 코드, LAYER 정보

문제 텍스트 (조대표님 지침에 따라 QUESTION 필드 내용 전체 표시)

답안 선택:

진위형: 'O', 'X' 버튼만 표시

선택형: '1', '2', '3', '4' 버튼만 표시

결과 표시: 정답/오답 메시지

네비게이션/액션 버튼: '이전 문제', '정답 확인', '다음 문제', '해설 보기' (한 문제씩 풀기 시)

기본 홈 버튼: 대문으로 돌아가기

기능 정의:

기본 학습 모드 진입 시 해당 UI가 표시됩니다.

'홈으로' 버튼 클릭 시 대문 페이지로 돌아갑니다.

이어풀기 선택 시 LocalStorage에 저장된 마지막 풀이 문제 인덱스부터 시작.

코코치 추가 기능: 사용자가 문제를 풀다가 앱을 종료해도, 이어풀기 시 마지막 풀이 문제의 인덱스를 정확히 불러올 수 있도록 LocalStorage에 현재 문제 인덱스를 저장하는 로직 추가.

처음부터 풀기 선택 시 questions 배열의 첫 문제부터 시작.

랜덤 풀기 선택 시 questions 배열에서 무작위 문제 선택.

1회당 풀이 문제 선택 옵션에 따라 문제 제시 및 결과 처리 방식이 달라집니다.

코코치 추가 기능: '5문제씩 풀기' 또는 '10문제씩 풀기' 모드에서 해당 문제 묶음에 대한 답안을 모두 입력했을 때 '완료' 버튼이 활성화되고, 클릭 시 해당 묶음의 문제들에 대한 정답/오답 여부를 일괄적으로 표시하는 로직.

문제 유형(TYPE 필드)에 따라 진위형/선택형 답안 버튼이 동적으로 표시됩니다.

'정답 확인' 시 정답 여부 표시 및 해설 버튼 활성화.

'해설 보기' 클릭 시 LLM 기반 해설 모달 표시.

문제 이동(이전/다음) 및 통계 업데이트.

코코치 추가 기능: 각 문제 풀이 완료 시 LocalStorage 학습 이력에 해당 문제의 풀이 완료 시점을 기록하여, 나중에 '틀린 문제 다시 풀기 (심화)' 모드에서 간격 반복 학습을 위한 기반 마련.

3.3 모의고사 페이지 (mock-test-screen)
UI 구성:

좌측 상단: '🏠 홈으로' 버튼

타이틀: "모의고사"

시험 현황: 남은 시간, 진행률 (현재 문제 수 / 총 문제 수)

"시험 종료 및 결과 보기" 버튼

문제 내용은 common-learning-screen과 연동하여 표시.

기능 정의:

모의고사 모드 진입 시 해당 UI가 표시됩니다.

'홈으로' 버튼 클릭 시 대문 페이지로 돌아갑니다.

모의고사 문제 추출 및 타이머 로직은 향후 구현.

3.4 학습 통계 페이지 (learning-statistics-screen)
UI 구성:

좌측 상단: '🏠 홈으로' 버튼

타이틀: "학습 통계 대시보드"

전체 학습 요약 (총 학습 시간, 누적 문제 풀이, 전체 정답률, 가장 취약한 대분류)

영역별 성과 (차트 Placeholder)

오답 노트 요약 (Placeholder)

기능 정의:

학습 통계 모드 진입 시 해당 UI가 표시됩니다.

'홈으로' 버튼 클릭 시 대문 페이지로 돌아갑니다.

LocalStorage의 학습 이력 데이터를 기반으로 통계 데이터 계산 및 차트/테이블에 표시.

3.5 설정 모달
UI 구성:

타이틀: "설정"

메뉴 버튼: '사용자 등록', '사용법', '시험 개요'

'닫기' 버튼

기능 정의:

설정 버튼 클릭 시 모달이 열리고, '닫기' 또는 모달 외부 클릭 시 닫힙니다.

각 메뉴 버튼 클릭 시 해당 기능(팝업 또는 화면 전환)이 구현됩니다.

4. 다음 단계 및 역할 분담
조대표님, 이 ACIU 기능정의서 V1.3은 앞으로의 개발을 위한 공식적인 가이드라인이 될 것입니다.

조대표님 승인: 이 기능 정의서에 대해 조대표님의 최종 승인을 부탁드립니다.

서대리님께 지시: 조대표님의 승인 후, 서대리님께 index3.1.html 파일을 index3.2.html로 복사하고, 이 기능 정의서에 따라 대문(모드 선택) 페이지의 모든 요구사항(특히 통계/그래프 통합 및 LocalStorage 연동)을 최우선으로 구현하도록 지시하겠습니다. 이때, 서대리님은 함수 단위 구조화를 철저히 지켜야 합니다.

노팀장님 역할: 노팀장님은 서대리님의 작업 과정에서 데이터 처리, 통계 계산, 그래프 연동 등 기술적인 부분에 대해 적극적으로 자문하고 지원해 주십시오.

조대표님, 이 기능 정의서에 대해 의견 주시면 감사하겠습니다.